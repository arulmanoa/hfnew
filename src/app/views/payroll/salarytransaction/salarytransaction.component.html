<div class="page-wrapper">
  <div class="page-content">
    <app-loading-screen></app-loading-screen>

    <div class="docs-page" *ngIf="!pageLayout">
      <div class="Error full-screen">
        <div><img src="assets/Images/designer-life.svg" style="height: 6rem;"> </div>
        <h1>
          <span class="spinner-border spinner-border-sm m-r-10 primary-color" role="status" aria-hidden="true"> </span>
        </h1>
        <p>Please wait while we set things up for you</p>
      </div>
    </div>
    <div>

      <!-- <div class="text-center ma-5" *ngIf="!pageLayout">
        <button class="btn btn-default p-l-30 p-r-30" type="button" disabled>
          <span class="spinner-border spinner-border-sm m-r-10 primary-color" role="status" aria-hidden="true"></span>
          Please wait...
        </button>
      </div> -->
      <div class="int-full-search-panel" *ngIf="!searchPanel && BusinessType == 3">
        <app-searchbar-view *ngIf="pageLayout" [Content]="PayTransaction" [BusinessType]="BusinessType"  [isBtnDisabledRequired]="isBtnDisabledRequired"
          [searchConfiguration]="pageLayout.SearchConfiguration" (searchButtonClicked)="onClickingSearchButton($event)"
          (isClose)="isCloseContent($event)"></app-searchbar-view>
      </div>
      <div class="int-full-search-panel" *ngIf="BusinessType != 3">
        <app-searchbar-view *ngIf="pageLayout" [Content]="PayTransaction" [BusinessType]="BusinessType"  [isBtnDisabledRequired]="isBtnDisabledRequired"
          [searchConfiguration]="pageLayout.SearchConfiguration" (searchButtonClicked)="onClickingSearchButton($event)"
          (isClose)="isCloseContent($event)"></app-searchbar-view>
      </div>
      <!-- <div class="content m-b report-content animated fadeInDown int-header-content-panel"  *ngIf="searchPanel && BusinessType != '3'">
        <span class="es-text">
         
          <span >
            {{searchObject.TeamName}} &nbsp; | &nbsp;   {{searchObject.PayPeriodName}} 
          </span>
          <span *ngIf="searchObject === undefined"> No record were found! Please try after sometimes. </span>
          <button class="btn btn-default btn-bold" style="margin-top: -5px;float: right; margin-left: 20px;"
            (click)="openSearch()" tooltip="Custom filter" data-original-title="" title="">
            <i class="mdi mdi-filter-outline font-size-md" style="margin-right: 5px;"></i>
          </button>
          <span style="float: right;" *ngIf="searchObject !== undefined">
            <i><b> {{dataset.length}} result(s) found </b></i>  
          </span>
        </span>
      </div> -->

      <div class="content m-b report-content animated fadeInDown int-header-content-panel"  *ngIf="searchPanel && BusinessType == 3">
        <!-- <label class="form-label searchbar-label">Search Criteria</label> -->
        <span class="es-text">
          <span *ngIf="searchObject !== undefined">
            <b> {{searchObject.ClientName}} </b> <span *ngIf="searchObject.ContractName != null"> &nbsp; | &nbsp;
              {{searchObject.ContractName}} </span> <span *ngIf="searchObject.TeamName != null"> &nbsp; | &nbsp;
              {{searchObject.TeamName}} </span> <span *ngIf="searchObject.PayPeriodName != null">&nbsp; | &nbsp;
              {{searchObject.PayPeriodName}} </span>
          </span>
          <span *ngIf="searchObject === undefined"> No record were found! Please try after sometimes. </span>
          <button class="btn btn-default btn-bold" style="margin-top: -5px;float: right; margin-left: 20px;"
            (click)="openSearch()" tooltip="Custom filter" data-original-title="" title="">
            <i class="mdi mdi-filter-outline font-size-md" style="margin-right: 5px;"></i>
          </button>
          <span style="float: right;" *ngIf="searchObject !== undefined">
            <i><b> {{dataset.length}} result(s) found </b></i>
          </span>
        </span>
      </div>

      <div class="content m-b report-content animated fadeInDown animate__delay-2s" *ngIf="searchPanel"  style="margin-top: 20px !important;">
        <div class="row" style="margin-top: -10px;margin-bottom: 10px;" *ngIf="!spinner">
          <div class="col-lg-6">
  
          </div>
          <div class="col-lg-6" style="text-align: right;">
           
                <div *ngIf="!spinner && activeTabName == 'PAYINPUTS'">
                  <p style="font-size: 12px;margin-bottom: -35px;" *ngFor="let status of lengendForStatus"> <b> <span
                        class="text-success" style="font-size: 16px;">‚óè</span> {{status.EmployeeCount}}</b></p>
                </div>
  
          </div>
        </div> 
        <div class="row" style="margin-bottom: 20px;margin-top: -10px;padding: 10px;">

          <ngb-tabset (tabChange)="onChange_tabset($event)" [(activeId)]="activeTabName" style="width: 100%;">

            <ngb-tab id="PAYINPUTS" [disabled]="spinner" >
              <ng-template ngbTabTitle>&nbsp;
                
                
                <i class="fa fa-external-link" aria-hidden="true"></i> &nbsp;Pay Inputs 
              </ng-template>
              <ng-template ngbTabContent>

                <div class="text-center ma-5" *ngIf="spinner">
                  <button class="btn btn-default p-l-30 p-r-30" type="button" disabled>
                    <span class="spinner-border spinner-border-sm m-r-10 primary-color" role="status"
                      aria-hidden="true"></span>
                    Please wait...
                  </button>
                </div>


                <div class="row" *ngIf="!spinner && isPayInputsDuplicateEntry">
                  <div class="col-lg-12 text-center">
                    <ngb-alert [dismissible]="false">
                      <strong>The list item could not be displayed or updated because duplicate values were found in the list. Please reach out to your Support Administrator. </strong>
                    </ngb-alert>
                  </div>
                </div>

                <div *ngIf="!spinner && !isPayInputsDuplicateEntry">

                
                <div class="row" style="margin-bottom: 10px;" *ngIf="pageLayout  && !spinner">

                  <div class="col-lg-4 col-md-4 col-xs-12 col-xxs-12 col-12 text-left">
                    <div class="text-left">
                      <ul class="list-inline">


                        <!-- <li class="list-inline-item bg-1"> 
                          <button class="button button--rayen button--border-thin button--text-thick button--text-upper button--size-s" > <i class="mdi mdi-tag-plus  m-r-xs"></i>  Send Message</button>
                        </li> -->
                      </ul>
                    </div>
                  </div>

                  <div class="col-lg-8 col-md-8 col-xs-12 col-xxs-12 col-12 text-right">
                    <div class="text-right">
                      <ul class="list-inline">
                        <li class="list-inline-item">
                          <button type="button" class="btn btn-primary-custom" (click)="do_generate_PIS()">
                            <i class="mdi mdi-account-multiple-plus  m-r-xs"></i> Generate PIS
                          </button>
                        </li>
                        <li class="list-inline-item">
                          <button type="button" class="btn btn-primary-custom" (click)="importData_popup()">
                            <i class="mdi mdi-content-duplicate  m-r-xs"></i> Import PIS
                          </button>
                        </li>
                        <li class="list-inline-item" *ngIf="isEnableForSME_SubmitQC">
                          <button type="button" class="btn btn-primary-custom" (click)="submitForVerification()">
                            <i class="mdi mdi-checkbox-multiple-marked-outline  m-r-xs"></i> Submit to QC
                          </button>
                        </li>
                        <li class="list-inline-item" *ngIf="isEnableForSME_EmpForPayrun">
                          <button type="button" class="btn btn-primary-custom"
                            (click)="do_initiate_Sale_order('PAYINPUTS')">
                            <i class="mdi mdi-tag-plus  m-r-xs"></i> Choose Employees for Pay Run
                          </button>
                        </li>
                      </ul>
                    </div>
                  </div>

                </div>


               
                

                <div *ngIf="!spinner">
                  <angular-slickgrid gridId="grid1" [columnDefinitions]="columnDefinition" [gridOptions]="gridOptions"
                    [dataset]="dataset" gridWidth="100%"
                    (sgOnSelectedRowsChanged)="onSelectedRowsChanged($event.detail.eventData, $event.detail.args)"
                    (sgOnClick)="onCellClicked($event.detail.eventData, $event.detail.args)"
                    (onAngularGridCreated)="angularGridReady($event)">
                  </angular-slickgrid>
                </div>
              </div>
                
              </ng-template>


            </ngb-tab>
            <ngb-tab id="PAYRUN" [disabled]="spinner">
              <ng-template ngbTabTitle>&nbsp; <i class="fa fa-cube" aria-hidden="true"></i> &nbsp; Pay Run
              </ng-template>
              <ng-template ngbTabContent>

                <div class="text-center ma-5" *ngIf="spinner">
                  <button class="btn btn-default p-l-30 p-r-30" type="button" disabled>
                    <span class="spinner-border spinner-border-sm m-r-10 primary-color" role="status"
                      aria-hidden="true"></span>
                    Please wait...
                  </button>
                </div>


                <div class="row" *ngIf="!spinner && isPayRunDuplicateEntry">
                  <div class="col-lg-12 text-center">
                    <ngb-alert [dismissible]="false">
                      <strong>The list item could not be displayed or updated because duplicate values were found in the list. Please reach out to your Support Administrator. </strong>
                    </ngb-alert>
                  </div>
                </div>

                <div *ngIf="!spinner && !isPayRunDuplicateEntry">



                <div class="row" style="margin-bottom: 10px;" *ngIf="pageLayout  && !spinner">

                  <div class="col-lg-6 col-md-6 col-xs-12 col-xxs-12 col-12 text-left">
                    <div class="text-left">
                      <ul class="list-inline">

                      </ul>
                    </div>
                  </div>

                  <div class="col-lg-6 col-md-6 col-xs-12 col-xxs-12 col-12 text-right">

                    <div class="text-right">
                      <ul class="list-inline">

                        <li class="list-inline-item"> <button type="button" class="btn btn-primary-custom"
                            (click)="do_initiate_Sale_order('PAYRUN')">
                            <i class="mdi mdi-tag-plus  m-r-xs"></i> Initiate Pay Out
                          </button></li>


                      </ul>
                    </div>
                  </div>

                </div>


                <div *ngIf="!spinner">
                  <angular-slickgrid gridId="grid1" [columnDefinitions]="columnDefinition_payrun" [gridOptions]="gridOptions"
                    [dataset]="dataset_payrun" gridWidth="100%"
                    (sgOnSelectedRowsChanged)="onSelectedRowsChanged($event.detail.eventData, $event.detail.args)"
                    (sgOnClick)="onCellClicked($event.detail.eventData, $event.detail.args)"
                    (onAngularGridCreated)="angularGridReady($event)">
                  </angular-slickgrid>
                </div>
                </div>
              </ng-template>
            </ngb-tab>
            <ngb-tab id="PAYOUT" [disabled]="spinner">
              <ng-template ngbTabTitle>&nbsp; <i class="fa fa-cube" aria-hidden="true"></i> &nbsp; Pay Out
              </ng-template>
              <ng-template ngbTabContent>

                <div class="text-center ma-5" *ngIf="spinner">
                  <button class="btn btn-default p-l-30 p-r-30" type="button" disabled>
                    <span class="spinner-border spinner-border-sm m-r-10 primary-color" role="status"
                      aria-hidden="true"></span>
                    Please wait...
                  </button>
                </div>

                <div class="row" *ngIf="!spinner && isPayOutDuplicateEntry">
                  <div class="col-lg-12 text-center">
                    <ngb-alert [dismissible]="false">
                      <strong>The list item could not be displayed or updated because duplicate values were found in the list. Please reach out to your Support Administrator. </strong>
                    </ngb-alert>
                  </div>
                </div>

                <div *ngIf="!spinner && !isPayOutDuplicateEntry">

                <div class="row" style="margin-bottom: 10px;" *ngIf="pageLayout  && !spinner">

                  <div class="col-lg-6 col-md-6 col-xs-12 col-xxs-12 col-12 text-left">
                    <div class="text-left">
                      <ul class="list-inline">

                      </ul>
                    </div>
                  </div>

                  <div class="col-lg-6 col-md-6 col-xs-12 col-xxs-12 col-12 text-right">

                    <div class="text-right">
                      <ul class="list-inline">

                        <!-- <li class="list-inline-item" > <button type="button"
                        class="btn btn-primary-custom" (click)="do_initiate_Sale_order('PAYRUN')">
                        <i class="mdi mdi-tag-plus  m-r-xs"></i> Initiate Pay Out
                      </button></li> -->


                      </ul>
                    </div>
                  </div>

                </div>

               


                <div *ngIf="!spinner">
                  <angular-slickgrid gridId="grid1" [columnDefinitions]="columnDefinition_payout" [gridOptions]="gridOptions"
                    [dataset]="dataset_payout" gridWidth="100%"
                    (sgOnSelectedRowsChanged)="onSelectedRowsChanged($event.detail.eventData, $event.detail.args)"
                    (sgOnClick)="onCellClicked($event.detail.eventData, $event.detail.args)"
                    (onAngularGridCreated)="angularGridReady($event)">
                  </angular-slickgrid>
                </div>
                </div>
              </ng-template>
            </ngb-tab>

          </ngb-tabset>


          <div class="col-lg-6 col-md-6 col-xs-12 col-xxs-12 col-12 text-left">
            <div class="text-left">
              <ul class="list-inline">

              </ul>
            </div>
          </div>
          <div class="col-lg-6 col-md-6 col-xs-12 col-xxs-12 col-12 text-right">
            <div class="text-right">
              <ul class="list-inline">

                <li class="list-inline-item" *ngIf="code == 'pvr_verified_revise'">
                  <button type="button" class="btn btn-default" (click)="do_cancel_pvr()">
                    <i class="mdi mdi-close-circle-outline  m-r-xs"></i> Cancel
                  </button>
                </li>
                <li class="list-inline-item" *ngIf="code == 'pvr_verified_revise'"><button
                    [disabled]="selectedItems.length == 0" type="button" class="btn btn-danger"
                    (click)="do_approve_reject_pvr('reject')">
                    <i class="mdi mdi-cancel  m-r-xs"></i> Reject &nbsp;
                  </button></li>
                <li class="list-inline-item" *ngIf="code == 'pvr_verified_revise'"><button
                    [disabled]="selectedItems.length == 0" type="button" class="btn upgrade-btn"
                    (click)="do_approve_reject_pvr('approve')">
                    <i class="mdi mdi-checkbox-multiple-marked-circle-outline  m-r-xs"></i> Approve &nbsp;
                  </button></li>

                <li class="list-inline-item"
                  *ngIf="code == 'payrollinputs_list' || code == 'payrollVerificationRequest'">
                  <button type="button" class="btn btn-primary" (click)="do_Refresh()">
                    <i class="mdi mdi-refresh  m-r-xs"></i> Refresh
                  </button>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>

    </div>






    <div id="popup_submitToQC" class="modal fade" tabindex="1" role="dialog" data-backdrop="static"
      data-keyboard="false" aria-labelledby="popup_submitToQC" aria-hidden="true">
      <div style="display: block;" class="modal fade show animated fadeInDownBig">
        <div class="modal-dialog modal-lg modal-dialog-centered">
          <div class="modal-content">

            <div class="modal-header" style="padding: 15px !important;">


              <div class="col-xs-11" style="margin-top: -5px; margin-bottom: -5px;">
                <small class="header-pretitle"><b> Submit to QC (Employee) </b></small>
                <h6 class="modal-title subheader_h6" id="popup_release_AL"> <span> PVR Ids : {{PVRIds_Modal}} | Team
                    Name : {{TeamName_Modal}}</span>
                </h6>
              </div>

              <div class="modal-close" (click)="close_submitQC()" style="margin-top: 5px;"><span
                  class="mdi mdi-close pull-left"></span>
              </div>
            </div>


            <div class="modal-body">
              <div class="row">
                <div class="col-xs-6  col-sm-6  p-r-50">
                  <b> Include employee(s) with following processing status </b>
                  <div class="p-t-10">
                    <label class="el-checkbox el-checkbox-green">
                      <input type="checkbox" name="Status" [(ngModel)]="isProcessedChkbox"
                        (change)="onNativeChangeProcessed($event, 'Processed')" />
                      <span class="el-checkbox-style"></span> &nbsp;&nbsp; Payroll Calculated
                    </label>
                  </div>
                  <div class="p-t-10">
                    <label class="el-checkbox el-checkbox-green">
                      <input type="checkbox" name="Status" [(ngModel)]="isRejectedChkbox"
                        (change)="onNativeChangeProcessed($event, 'Rejected')" />
                      <span class="el-checkbox-style"></span>&nbsp;&nbsp; QC Rejected
                    </label>
                  </div>
                </div>
                <div class="col-xs-6  col-sm-6  p-r-50"></div>
              </div>
              <br>
              <div class="row">
                <div class="col-xs-12  col-sm-12  p-r-50">
                  <!-- <b (click)="close_submitQC()"> if you want to choose the employees manually, please <i
                    class="fa fa-external-link link" aria-hidden="true">Click here</i>
                </b> -->


                  <div>


                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <div class="row" style="width: 100%;">
                <div class="col-lg-6 col-12">
                  <div class="form-group form-group-vertical col-xs-12 col-sm-12">
                    <label class="form-label"> Overall Request Remarks </label>
                    <textarea class="form-control" rows="2" placeholder="Type your message here..." spellcheck="false"
                      id="remarks" [(ngModel)]="OverAllRemarks"></textarea>
                  </div>
                </div>
                <div class="col-lg-6 col-12">
                  <div class="pull-right left-margin-btn" style="margin-top: 3rem;">
                    <button class="btn upgrade-btn pull-right" type="button" (click)="ConfirmToQC()"> <i
                        class="mdi mdi-checkbox-multiple-marked-circle-outline"></i> &nbsp; Confirm</button>

                  </div>
                </div>
              </div>


            </div>
          </div>
        </div>
      </div>
    </div>

    <nz-drawer [nzVisible]="visible" [nzWidth]="1100" nzTitle="Submit to QC (Employee) " (nzOnClose)="close_submitQC()">
      <div class="row" style="width: 100%;margin: 0px;">
        <div class="col-lg-6" style="padding-left: 0px;">
          <!-- <h6 class="emp-id-label"> No. Of Employee(s) : <b> {{inEmployeesList.length}}</b> &nbsp; &nbsp; &nbsp; Selected Employee(s) : <b> {{inEmployeesSelectedItems.length}}</b></h6> -->
        </div>
        <div class="col-lg-6 col-6">
          <div class="pull-right left-margin-btn" style="margin-bottom: 1rem;">
            <button class="btn upgrade-btn pull-right" type="button" (click)="ConfirmToQC()"> <i
                class="mdi mdi-checkbox-multiple-marked-circle-outline"></i> &nbsp; Confirm</button>

          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-6  col-sm-6  p-r-50">
          <b> Include employee(s) with following processing status </b>
          <div class="p-t-10">
            <label class="el-checkbox el-checkbox-green">
              <input type="checkbox" name="Status" [(ngModel)]="isProcessedChkbox"
                (change)="onNativeChangeProcessed($event, 'Processed')" />
              <span class="el-checkbox-style"></span> &nbsp;&nbsp; Payroll Calculated
            </label>
          </div>
          <div class="p-t-10">
            <label class="el-checkbox el-checkbox-green">
              <input type="checkbox" name="Status" [(ngModel)]="isRejectedChkbox"
                (change)="onNativeChangeProcessed($event, 'Rejected')" />
              <span class="el-checkbox-style"></span>&nbsp;&nbsp; QC Rejected
            </label>
          </div>
        </div>
        <div class="col-xs-6  col-sm-6  p-r-50">

          <div class="form-group form-group-vertical col-xs-12 col-sm-12">
            <label> <b> Overall Request Remarks </b></label>
            <textarea class="form-control" rows="3" placeholder="Type your message here..." spellcheck="false"
              id="remarks" [(ngModel)]="OverAllRemarks"></textarea>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-12" style="text-align: right;">
          <label> <b> No. Of Employee(s) : <b> {{inEmployeesList.length}}</b> &nbsp; &nbsp; &nbsp; Selected Employee(s)
              : <b> {{inEmployeesSelectedItems.length}}</b></b></label>
        </div>
      </div>

      <angular-slickgrid gridId="grdinEmployees3" [columnDefinitions]="inEmployeesColumnDefinitions"
        [gridOptions]="inEmployeesGridOptions" [dataset]="lstEmpForSubmitQC"
        (onAngularGridCreated)="inEmployeesGridReady($event)" gridWidth="100%"
        (sgOnSelectedRowsChanged)="onSelectedEmployeeChange($event.detail.eventData, $event.detail.args)">
      </angular-slickgrid>


    </nz-drawer>


    <!-- <div id="popup_confirmationAlert" class="modal fade" tabindex="1" role="dialog" data-backdrop="static"
    data-keyboard="false" aria-labelledby="popup_confirmationAlert" aria-hidden="true">
    <div style="display: block;" class="modal fade show animated fadeInDownBig">
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">

          <div class="modal-header" style="padding: 15px !important;">

            <div class="col-xs-11" style="margin-top: -5px; margin-bottom: -5px;">
              <small class="header-pretitle"><b>Confirmation!</b></small>
              <h6 class="modal-title subheader_h6" id="popup_release_AL">Generate PIS</h6>
            </div>

          </div>


          <div class="modal-body">
            <div class="row">
              <div class="col-xs-12  col-sm-12  p-r-50">
                <b> Include employee(s) with following processing status </b>
                <div class="p-t-10">
                  <label class="el-checkbox el-checkbox-green">
                    <input type="checkbox" name="Status"  [(ngModel)]="isAlertPIS" disabled/>
                    <span class="el-checkbox-style"></span> &nbsp;&nbsp; QC Rejected
                  </label>
                </div>
                <div class="p-t-10" >
                  <label class="el-checkbox el-checkbox-green">
                    <input type="checkbox" name="Status" [(ngModel)]="isAlertPIS1" (change)="onChangeConfirmationAlert($event, 'Approved')" />
                    <span class="el-checkbox-style"></span>&nbsp;&nbsp; QC Approved
                  </label>
                </div>
              </div>

            </div>
          </div>

          <div class="modal-footer">
            <div class="pull-left left-margin-btn">
            </div>
            <div class="pull-right m-r-sm">
              <button class="btn  btn-default m-r-sm" type="Submit" name="btnSubmit" id="btnSubmit"
                (click)="closeModal()">
                <div class="pos-rlt sm-btn-component"> <span> <i class="mdi mdi-close"></i> No, Cancel </span></div>
              </button>

              <button class="btn btn-primary pull-right" type="button" (click)="Save()"> <i
                  class="mdi mdi-checkbox-multiple-marked-circle-outline"></i> &nbsp; Yes, Confirm</button>

            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
 -->