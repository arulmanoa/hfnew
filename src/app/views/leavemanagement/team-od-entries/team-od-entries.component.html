<div class="page-wrapper">
  <div class="page-content">
    <app-loading-screen></app-loading-screen>

    <div class="text-center ma-5" *ngIf="spinner">
      <button class="btn btn-default p-l-30 p-r-30" type="button" disabled>
        <span class="spinner-border spinner-border-sm m-r-10 primary-color" role="status" aria-hidden="true"></span>
        Please wait...
      </button>
    </div>

    <div class="row" style="margin-bottom: 10px;margin-top: -15px;" *ngIf="!spinner">
      <div class="col-lg-6 col-md-6 col-xs-12 col-xxs-12 col-12 text-left">
        <div class="text-left" style="margin-top: 5px;">
          <h6 class="h6_c"> {{pageTitle}}
            <!-- <i class="mdi mdi-information  m-r-xs" style="color: #94999d;" tooltip="There are a variety of reasons why your staff may need to take some time off from work. You may configure as many types of leave as required.
            " placement="right" theme="light" tooltip-class="size-f"> </i> -->
          </h6>

        </div>
      </div>
      <div class="col-lg-6 col-md-6 col-xs-12 col-xxs-12 col-12 text-right">
        <div class="text-right">
          <ul class="list-inline">
            <!-- <li class="list-inline-item" *ngIf="inEmployeesInitiateSelectedItems.length == 1">
              <button type="button" class="btn btn-default" id="btn_qc_approve" (click)="viewEntitlement()"> <i
                  class="mdi mdi-checkbox-marked-circle  m-r-xs"></i> View Entitlement
              </button>
            </li> -->

            <li class="list-inline-item">
              <button type="button" class="btn upgrade-btn" id="btn_qc_approve"
                [disabled]="inEmployeesInitiateSelectedItems.length == 0" (click)="bulk_approve_reject(true)"> <i
                  class="mdi mdi-checkbox-marked-circle  m-r-xs"></i> Approve
              </button>
            </li>
            <li class="list-inline-item">
              <button type="button" class="btn btn-danger" id="btn_qc_reject"
                [disabled]="inEmployeesInitiateSelectedItems.length == 0" (click)="bulk_approve_reject(false)"> <i
                  class="mdi mdi-close-circle  m-r-xs"></i>
                Reject
              </button>
            </li>
            <li class="list-inline-item"><button type="button" class="btn btn-default" (click)="onRefresh()">
                <i class="mdi mdi-refresh  m-r-xs"></i>Refresh
              </button>
            </li>
            <li class="list-inline-item" *ngIf="isManagerIdBased"><button type="button" class="btn btn-default"
                (click)="onClose()">
                <i class="mdi mdi-close  m-r-xs"></i>Close
              </button>
            </li>
          </ul>
        </div>
      </div>
    </div>







    <div class="content m-b report-content" style="margin-top: -5px;" *ngIf="!spinner">

      <div class="row" *ngIf="!spinner">
        <div class="col-lg-10 p-0" *ngIf="IsProxyAvailable && !isManagerIdBased">
          <!-- <div class="form-group form-group-vertical col-12 col-xs-12 col-lg-3 col-md-3 col-sm-3 displayinlineblock">
            <label class="form-label" style="text-align: left;"> Request Option </label>
            <ng-select [items]="_componentList" placeholder="-- Select an option --" bindLabel="componentName"
              bindValue="componentId" [(ngModel)]="selectedComponentId" [clearable]="false"
              (change)="onChange_component($event)">
            </ng-select>
          </div> -->
          <div class="form-group form-group-vertical col-12 col-xs-12 col-lg-4 col-md-4 col-sm-4 displayinlineblock">
            <label class="form-label" style="text-align: left;"> Request Option </label>
            <ng-select [items]="_proxyUserList" placeholder="-- Select an option --" bindLabel="proxyUserName"
              bindValue="proxyUserId" [(ngModel)]="selectedProxyUserId" [clearable]="false"
              (change)="onChange_proxy($event)">
            </ng-select>
          </div>
        </div>
        <div class="col-12 col-lg-2">

        </div>
      </div>


      <!-- <div class="row">
        <div class="col-lg-12 p-0">
          <div class="form-group form-group-vertical col-12 col-xs-12 col-lg-3 col-md-3 col-sm-3 displayinlineblock">
            <label class="form-label" style="text-align: left;">Start filter using Employee </label>
            <ng-select [items]="_employeeList" placeholder="-- Select an employee --" bindLabel="employeeName"
              bindValue="employeeId" [(ngModel)]="selectedEmployeeId" [clearable]="false"
              (change)="onChange_filter('employee', $event)">
            </ng-select>
          </div>
          <div class="form-group form-group-vertical col-12 col-xs-12 col-lg-3 col-md-3 col-sm-3 displayinlineblock">
            <label class="form-label" style="text-align: left;">Leave status </label>
            <ng-select [items]="_leaveRequestStatusList" placeholder="-- Select a Requeste Status --" bindLabel="name"
              [clearable]="false" bindValue="id" [(ngModel)]="selectedStatusId"
              (change)="onChange_filter('Status', $event)">
            </ng-select>
          </div>
          <div class="form-group form-group-vertical col-12 col-xs-12 col-lg-3 col-md-3 col-sm-3 displayinlineblock">
            <label class="form-label" style="text-align: left;">Month of Request </label>
            <ng-select [items]="_requestMonthList" placeholder="-- Select a month --" bindLabel="name" bindValue="id"
              [clearable]="false" [(ngModel)]="selectedMonthId" (change)="onChange_filter('Month', $event)">
            </ng-select>
          </div>
          <div class="form-group form-group-vertical col-12 col-xs-12 col-lg-3 col-md-3 col-sm-3 displayinlineblock">
            <label class="form-label" style="text-align: left;">Year of Request </label>
            <ng-select [items]="_requestYearList" placeholder="-- Select a Year --" bindLabel="name" bindValue="id"
              [clearable]="false" [(ngModel)]="selectedYearId" (change)="onChange_filter('Year', $event)">
            </ng-select>
          </div>
         

        </div>
       
      </div> -->

      <div class="row">
        <div class="col-md-4">
          <a href="javascript:;">
            <div class="grid simple border-2px" style="border-color: #c6f5d7;">
              <div class="grid-body">
                <p class="m-b-0" style="height: 42px;">New Requests</p>
                <!-- <span class="muted nowrap">This week</span> -->
                <div style="clear: both"></div>
                <div class="circle-box hidden-md"><span class="fa-stack" style="line-height: 15px">
                    <i class="fa fa-circle fa-stack-1x" style="font-size: 12px; color: #FF945B"></i>
                    <i class="fa fa-circle fa-stack-1x" style="font-size: 29px; color: #FF945B; opacity: 0.3"></i>
                  </span></div>
                <span class="size-34 semi-bold">
                  {{count_applied}}
                </span>
              </div>
            </div>
          </a>
        </div>

        <div class="col-md-4">
          <a href="javascript:;">
            <div class="grid simple border-2px" style="border-color: #ffebb4;">
              <div class="grid-body">
                <p class="m-b-0" style="height: 42px;">Approved - {{NameofMonth}} &nbsp;{{NameofYear}}
                </p>
                <div class="nowrap">
                  <div class="circle-box hidden-md"><span class="fa-stack" style="line-height: 15px">
                      <i class="fa fa-circle fa-stack-1x" style="font-size: 12px; color: #63E59F"></i>
                      <i class="fa fa-circle fa-stack-1x" style="font-size: 29px; color: #63E59F; opacity: 0.3"></i>
                    </span></div>
                  <span class="size-34 semi-bold">
                    {{count_approved}}
                  </span>
                </div>
              </div>
            </div>
          </a>
        </div>

        <div class="col-md-4">
          <a href="javascript:;">
            <div class="grid simple border-2px" style="border-color: #D8ECFF;">
              <div class="grid-body">
                <p class="m-b-0" style="height: 42px;">Rejected - {{NameofMonth}} &nbsp;{{NameofYear}}
                </p>
                <div class="nowrap">
                  <div class="circle-box hidden-md"><span class="fa-stack" style="line-height: 15px">
                      <i class="fa fa-circle fa-stack-1x" style="font-size: 12px; color: #f44336"></i>
                      <i class="fa fa-circle fa-stack-1x" style="font-size: 29px; color: #f44336; opacity: 0.3"></i>
                    </span></div>
                  <span class="size-34 semi-bold">
                    {{count_rejected}}
                  </span>
                </div>
              </div>
            </div>
          </a>
        </div>
        <!-- <div class="col-md-6 d-flex">
          <div class="card flex" data-sr-id="11"
            style="visibility: visible; transform: none; opacity: 1; transition: none 0s ease 0s;">
            <div class="card-body">
              <div class="row row-sm">
                <div class="col-sm-12">
                  <div class="mb-2"><small class="text-muted">This month</small></div>
                  <div class="row row-sm">
                    <div class="col-6">
                      <div class="text-highlight text-md">{{count_totalDays}}</div><small>No of request</small>
                    </div>
                    <div class="col-6">
                      <div class="text-danger text-md">{{count_totalDays}}</div><small>Requests to be approved</small>
                    </div>                  
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div> -->
      </div>



      <div class="row" style="float: right; text-align: right;padding-bottom: 0px;margin-top: 5px;"
        [ngStyle]="{'width': isMobileResolution ?'107%' : '102%'}">

        <div class="col-12 col-xs-12 col-lg-6 col-md-6 col-sm-6 text-left" style="margin-top: -7px;">
          <ul class="list-inline">
            <li class="list-inline-item">
              <button type="button" class="btn btn-default" [routerLink]="['/app/listing/ui/onDutyRequestHistory']"
                style="float: right;border-radius: 6px;">
                View History
              </button>
            </li>
            <li class="list-inline-item">
              <button type="button" class="btn btn-default" style="float: right;border-radius: 6px;"
                (click)="exportToExcel()">
                Export Excel
              </button>
            </li>
          </ul>
        </div>
        <div class="col-12 col-xs-12 col-lg-6 col-md-6 col-sm-6">




          <div class="radio-group a" style="margin-top: -10px;" *ngIf="!isMobileResolution">
            <div class="col-auto mr-sm-2 mx-1 card-block py-0 text-center radio p-0 "
              [ngClass]="IsMusterroll ? 'selected' : ''" tooltip="card view" (click)="onClickMode('MusterRoll')">
              <div class="flex-row">
                <div class="col p-0">
                  <div class=""> <img class="irc_mut img-fluid" src="assets/Images/grid-view.jpg" width="18"
                      style="margin-top: 7px;">
                  </div>

                </div>
              </div>
            </div>
            <div class="col-auto ml-sm-2 mx-1 card-block py-0 text-center radio p-0"
              [ngClass]="IsMusterroll ? '' : 'selected'" tooltip="list view" (click)="onClickMode('NonMusterRoll')">
              <div class="flex-row">
                <div class="col p-0">
                  <div class=""> <img class="irc_mut img-fluid" src="assets/Images/list-view.jpg" width="18"
                      style="margin-top: 7px;"> </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <br />

      <div class="row hidden-sm" style="width: 102%;" *ngIf="!spinner && !IsMusterroll">
        <div class="col-lg-12">
          <angular-slickgrid gridId="grid1" [columnDefinitions]="inEmployeesInitiateColumnDefinitions"
            [gridOptions]="inEmployeesInitiateGridOptions" [dataset]="inEmployeesInitiateList"
            (onAngularGridCreated)="inEmployeesInitiateGridReady($event)" gridWidth="100%"
            (sgOnClick)="onCellClicked($event.detail.eventData, $event.detail.args)"
            (sgOnSelectedRowsChanged)="onSelectedEmployeeChange($event.detail.eventData, $event.detail.args)">
          </angular-slickgrid>
        </div>
      </div>

      <div class="row" *ngIf="isMobileResolution && inEmployeesInitiateList.length == 0" style="text-align: center;
            padding: 10px;
            font-weight: 600;">
        <div class="col-12">
          <p>No records found!</p>
        </div>
      </div>


      <div class="row" *ngIf="!spinner && IsMusterroll" [ngStyle]="{'width': isMobileResolution ?'107%' : '102%'}">
        <ng-container *ngIf="inEmployeesInitiateList.length > 0">
          <div class="col-md-4 col-sm-4 col-xs-6"
            *ngFor="let item of inEmployeesInitiateList | filter: searchText; let i = index">

            <div class="card">
              <div class="card-header" style="background-color: white;border: none;padding: 10px;">
                <div class="row">
                  <div class="col-lg-8">
                    <span style="font-size: 13px;font-weight: 600;">{{item.EmployeeName}}
                      [{{item.EmployeeCode}}]</span>
                  </div>
                  <div class="col-lg-4 text-right">
                    <span *ngIf="item.Status == 100" class="badge badge-soft-warning"
                      style="display: inline;">{{item.StatusName}} </span>
                    <span *ngIf="item.Status == 400" class="badge badge-soft-success"
                      style="display: inline;">{{item.StatusName}} </span>
                    <span *ngIf="item.Status == 300 || item.Status == 200" class="badge badge-soft-danger"
                      style="display: inline;">
                      {{item.StatusName}} </span>
                  </div>
                </div>


              </div>
              <div class="card-body" style="background-color: #f3f8ff;padding: 10px;">
                <div class="row align-items-center">
                  <div class="col">
                    <span style="font-size: 13px;font-weight: 600;">{{item.EntitlementCode}} &nbsp;
                      Leave Request</span>
                    <br />
                    <span style="font-size: 11px;">{{item.AppliedFrom | date :'MMMM d'}} -
                      {{item.AppliedTill | date
                      :'MMMM d y'}} </span>
                  </div>

                </div>
              </div>
              <div class="card-footer" style="background-color: white;border: none;padding: 10px;">
                <div class="row">
                  <div class="col-lg-6">
                    <span style="font-size: 13px; color: #1890ff; font-weight: 600;">{{item.CalculatedAppliedUnits}}
                      day(s)</span>
                    <br />
                    <span style="font-size: 11px;" title="{{item.ApplierRemarks}}"> Comments :
                      {{item.ApplierRemarks}}
                    </span>
                  </div>
                  <div class="col-lg-6" style="text-align: right;">
                    <!-- <button title="Decline" class="btn btn-link btn-link_danger tw-bg-transparent tw-mx-6 tw-p-0"
                      (click)="do_approve_decline(item, false)"> Decline
                    </button>
                    <button title="Approve" data-cy="decline-leave-btn" (click)="do_approve_decline(item, true)"
                      class="btn btn-link btn-link_approve tw-bg-transparent tw-mx-6 tw-p-0"> Approve </button> -->

                    <a href="javascript:;" class="btn action-edit" style="margin-right: 5px;font-size: 12px;background: #F5F5F5;
  min-width: 32px;
  min-height: 32px;
  padding: 4px;
  border-radius: 50%;
  font-weight: 800 !important;display: inline-block;color: #212529;user-select: none;border: 1px solid transparent;line-height: 1.5;    transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;
  text-align: center;
  vertical-align: middle;" title="Decline" (click)="do_approve_decline(item, false)">
                      <i class="fa fa-ban" aria-hidden="true" style="font-size: 16px;color: #e63757;"></i></a>
                    <a href="javascript:;" class="btn action-edit" style="margin-right: 5px;font-size: 12px;background: #F5F5F5;
                      min-width: 32px;
                      min-height: 32px;
                      padding: 4px;
                      border-radius: 50%;
                      font-weight: 800 !important;display: inline-block;color: #212529;user-select: none;border: 1px solid transparent;line-height: 1.5;    transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;
                      text-align: center;
                      vertical-align: middle;" title="Approve" (click)="do_approve_decline(item, true)">
                      <i class="fa fa-check-square" aria-hidden="true" style="font-size: 16px;color: #00d97e;"></i></a>

                    <a href="javascript:;" class="btn action-edit" style="margin-right: 5px" title="Edit"
                      (click)="do_revise(item)">
                      <i class="fa fa-eye" aria-hidden="true" style="font-size: 16px;color: #838383;"></i>
                    </a>

                  </div>
                </div>

              </div>
            </div>

          </div>
        </ng-container>
      </div>




      <br>

      <ngb-pagination *ngIf="!spinner && inEmployeesInitiateList.length > 0 && IsMusterroll"
        [collectionSize]="collectionSize" [(page)]="page" [pageSize]="pageSize" (pageChange)="getPremiumData();">
      </ngb-pagination>
    </div>

  </div>
</div>


<div id="popup_edit_attendance" class="modal fade" tabindex="1" role="dialog" data-backdrop="static"
  data-keyboard="false" aria-labelledby="popup_edit_attendance" aria-hidden="true">
  <div style="display: block;" class="modal fade show animated">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header" style="padding: 20px !important;">
          <div class="col-xs-11" style="margin-top: -5px; margin-bottom: -5px;">
            <small class="header-pretitle" style="color: #3a3a3a;font-weight: 600;"
              *ngIf="rowData && rowData.Status != 600">Applied OD Request</small>
            <!-- <h6 class="modal-title subheader_h6" id="popup_release_AL">Your Request</h6> -->
            <small class="header-pretitle" style="color: #3a3a3a;font-weight: 600;"
              *ngIf="rowData && rowData.Status == 600">Applied Cancel OD Request</small>


          </div>

          <div class="modal-close" (click)="close_leaverequest_approval_slider()"
            style="margin-top: 5px;top: 7px !important;">
            <span class="mdi mdi-close pull-left"></span>
          </div>
        </div>
        <div class="modal-body">


          <div class="row" style="margin-bottom: -16px;">

            <div class="col-lg-8">
              <div class="row">
                <div class="col-lg-12">
                  <span color="white" class="ant-avatar Avatar-sc-7th3ur-0 kbEFEL ant-avatar-circle ant-avatar-icon"
                    style="width: 36px; height: 36px; line-height: 36px; font-size: 18px;">
                    <i aria-label="icon: user" class="anticon anticon-user">
                      <svg viewBox="64 64 896 896" class="" data-icon="user" width="1em" height="1em"
                        fill="currentColor" aria-hidden="true" focusable="false">
                        <path
                          d="M858.5 763.6a374 374 0 0 0-80.6-119.5 375.63 375.63 0 0 0-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 0 0-80.6 119.5A371.7 371.7 0 0 0 136 901.8a8 8 0 0 0 8 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 0 0 8-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z">
                        </path>
                      </svg></i> </span> <span style="padding-left: 11px; 
                      font-size: 12px;"> {{_employeeName}} </span>
                </div>
              </div>
              <div class="row" style="margin-top: 15px;" *ngIf="isOpened">
                <div class="col-xs-12  col-sm-12  p-r-50">
                  <form [formGroup]="leaveForm">
                    <div class="row">

                      <div class="form-group form-group-vertical col-xs-12  col-sm-6 pb-10">
                        <label class="form-label" style="margin-bottom: -2px;">Applied From
                        </label>
                        <span style="font-size: 12px;">{{leaveForm.get('AppliedFrom').value | date :'dd-MM-yyyy'}}
                        </span>
                        <!-- <input class="form-control" type="text" name="AppliedFrom" disabled bsDatepicker
                          placement="bottom" readonly
                          [bsConfig]="{  dateInputFormat: 'DD-MM-YYYY', containerClass:'theme-default' }"
                          placeholder="12-12-1970" formControlName="AppliedFrom"
                          [ngClass]="{ 'is-invalid': submitted && g.AppliedFrom.errors }" autocomplete="off">
                        <div *ngIf="submitted && g.AppliedFrom.invalid" class="help-block">
                          <div *ngIf="g.AppliedFrom.errors.required">Applied From is required
                          </div>
                        </div> -->
                      </div>

                      <div class="form-group form-group-vertical col-12 col-xs-12 col-sm-3"
                        *ngIf="employeeEntitlement && !employeeEntitlement.Entitlement.IsOptionalHoliday && leaveForm.get('IsAppliedForFirstHalf').value">
                        <label class="form-label">First half (from date)</label>
                        <div class="">
                          <label class="el-checkbox el-checkbox-red">
                            <input type="checkbox" name="IsAppliedForFirstHalf" disabled
                              formControlName="IsAppliedForFirstHalf" />
                            <span class="el-checkbox-style"></span>
                          </label>
                        </div>
                      </div>

                      <div class="form-group form-group-vertical col-12 col-xs-12 col-sm-3"
                        *ngIf="employeeEntitlement && !employeeEntitlement.Entitlement.IsOptionalHoliday && leaveForm.get('IsAppliedFromSecondHalf').value">
                        <label class="form-label">Second half</label>
                        <div class="">
                          <label class="el-checkbox el-checkbox-red">
                            <input type="checkbox" name="IsAppliedFromSecondHalf" disabled
                              formControlName="IsAppliedFromSecondHalf" />
                            <span class="el-checkbox-style"></span>
                          </label>
                        </div>

                      </div>




                      <div class="form-group form-group-vertical col-xs-12  col-sm-6 pb-10">
                        <label class="form-label" style="margin-bottom: -2px;"> Applied Till
                        </label>
                        <span style="font-size: 12px;">{{leaveForm.get('AppliedTill').value |
                          date :'dd-MM-yyyy'}}
                        </span>

                        <!-- <input class="form-control" type="text" name="AppliedTill" disabled bsDatepicker
                          placement="bottom" readonly
                          [bsConfig]="{  dateInputFormat: 'DD-MM-YYYY', containerClass:'theme-default' }"
                          placeholder="12-12-1970" formControlName="AppliedTill"
                          [ngClass]="{ 'is-invalid': submitted && g.AppliedTill.errors }" autocomplete="off">
                        <div *ngIf="submitted && g.AppliedTill.invalid" class="help-block">
                          <div *ngIf="g.AppliedTill.errors.required">Applied Till is required
                          </div>
                        </div> -->
                      </div>



                      <div class="form-group form-group-vertical col-12 col-xs-12 col-sm-3"
                        *ngIf="employeeEntitlement && !employeeEntitlement.Entitlement.IsOptionalHoliday &&  leaveForm.get('IsAppliedTillFirstHalf').value">
                        <label class="form-label">First half (till date)</label>
                        <div class="">
                          <label class="el-checkbox el-checkbox-red">
                            <input type="checkbox" name="IsAppliedTillFirstHalf" disabled
                              formControlName="IsAppliedTillFirstHalf" />
                            <span class="el-checkbox-style"></span>
                          </label>
                        </div>

                      </div>

                      <div class="form-group form-group-vertical col-12 col-xs-12 col-sm-3"
                        *ngIf="employeeEntitlement && !employeeEntitlement.Entitlement.IsOptionalHoliday && leaveForm.get('IsAppliedTillSecondHalf').value">
                        <label class="form-label">Second half</label>
                        <div class="">
                          <label class="el-checkbox el-checkbox-red">
                            <input type="checkbox" name="IsAppliedTillSecondHalf" disabled
                              formControlName="IsAppliedTillSecondHalf" />
                            <span class="el-checkbox-style"></span>
                          </label>
                        </div>

                      </div>

                      <!-- <div class="form-group form-group-vertical col-12 col-xs-12 col-sm-6">
                        <label class="form-label">Is Applied Till SecondHalf</label>
                        <div class="p-t-10">
                          <label class="el-switch el-switch-green">
                            <input type="checkbox" name="IsAppliedTillSecondHalf" disabled formControlName="IsAppliedTillSecondHalf"/>
                            <span class="el-switch-style"></span>
                          </label>
                        </div>
                      </div> -->

                      <!-- <div class="form-group form-group-vertical col-xs-12 col-sm-6 pb-10">
                        <label class="form-label ">Leave Type </label>
                        <p style="font-size: 12px;"> {{getLeaveType(leaveForm.get('Entitlement').value)}}</p>

                      </div> -->
                      <div class="form-group form-group-vertical col-xs-12  col-sm-6"
                        *ngIf="employeeEntitlement && employeeEntitlement.Definition.IsAdditionalDateInputRequired">
                        <label class="form-label" style="margin-bottom: 7px;">
                          {{employeeEntitlement.Definition.AdditionalDateLabelName}}
                        </label>
                        <span style="font-size: 12px;">{{leaveForm.get('AdditionalDateInput').value
                          |
                          date :'dd-MM-yyyy'}}
                        </span>
                      </div>

                      <div class="form-group form-group-vertical col-xs-12  col-sm-6"
                        *ngIf="isAllowedToViewDocument && leaveForm.get('AdditionalDocumentId').value > 0 && leaveForm.get('AdditionalDocumentId').value != null">
                        <label class="form-label" style="margin-bottom: -2px;"> Attachment
                        </label>
                        <span style="font-size: 12px;">{{leaveForm.get('AdditionalDocumentName').value}}
                          <span *ngIf="!isZipFile()" (click)="viewAttachments()"
                            style="cursor: pointer;display: inline-block;padding-right: 5px;"
                            matTooltip="view attachment" title="view attachment">
                            <i class="mdi mdi-file-document-outline"
                              style="display: block; top: 5px;position: relative;color: #0d395f;font-size: 18px;"></i>
                          </span>

                          <span *ngIf="isZipFile()" (click)="downloadAttachments()"
                                style="cursor: pointer;display: inline-block;padding-right: 5px;"
                                matTooltip="download attachment" title="download attachment">
                                <i class="mdi mdi-download"
                                  style="display: block; top: 5px;position: relative;color: #0d395f;font-size: 18px;"></i>
                              </span>
                        

                        </span>
                      </div>

                      <div class="form-group form-group-vertical col-xs-12 col-sm-6">
                        <label class="form-label" style="margin-bottom: -2px;"> Requested On
                        </label>
                        <span style="font-size: 12px;"><b style="color: black;">
                            {{leaveForm.get('AppliedOn').value |
                            date :'EEEE, MMMM d, y'}} </b>
                        </span>

                      </div>


                      <!-- <div class="form-group form-group-vertical col-xs-12 col-sm-6"
                        *ngIf="rowData && rowData.Status != '600'"> -->
                        <!-- ! fix for bug 5810 -->
                        <div class="form-group form-group-vertical col-xs-12 col-sm-6">
                        <label class="form-label" style="margin-bottom: -2px;"> Day(s) of leave
                        </label>
                        <span style="font-size: 12px;"><b style="color: black;">
                            {{leaveForm.get('CalculatedAppliedUnits').value}} </b>
                        </span>

                      </div>



                      <!-- <div class="form-group form-group-vertical col-xs-12 col-sm-6"
                        *ngIf="rowData && rowData.Status != '600'"> -->
                        <!-- ! fix for bug 5810 -->
                        <div class="form-group form-group-vertical col-xs-12 col-sm-6">
                        <label class="form-label" style="margin-bottom: -2px;">Type
                        </label>
                        <span style="font-size: 12px;"><b style="color: black;">
                            {{getLeaveType(leaveForm.get('Entitlement').value)}} </b>
                        </span>

                      </div>
                      <!-- COMP OFF -->
                      <div class="form-group form-group-vertical col-xs-12  col-sm-6"
                      *ngIf="employeeEntitlement && employeeEntitlement.Definition && employeeEntitlement.Definition.IsCompOff">
                        <label class="form-label" >
                          {{employeeEntitlement.Definition.AdditionalDateLabelName}}
                        </label>
                        <span style="font-size: 12px;">{{leaveForm.get('compOffDates').value}}
                        </span>
                      </div>

                      <!-- Bereavement leave  -->
                      <div class="form-group form-group-vertical col-xs-12  col-sm-6"
                      *ngIf="employeeEntitlement && employeeEntitlement.Definition && employeeEntitlement.Definition.IsBereavementLeave">
                        <label class="form-label" >  {{employeeEntitlement.Definition.AdditionalDateLabelName}}  </label>
                        <span style="font-size: 12px;">{{leaveForm.get('relationshipId').value}} </span>
                      </div>



                      <div class="form-group form-group-vertical col-xs-12 col-sm-6">


                        <!-- <input class="form-control" name="AppliedUnits" disabled type="number"
                          formControlName="AppliedUnits" placeholder="5.5"
                          onkeypress="return /^-?[0-9.--]\d*(\.\d+)?$/i.test(event.key)"
                          (onkeypress)="return (event.charCode == 8 || event.charCode == 0) ? null : event.charCode >= 48 && event.charCode <= 57"
                          onpaste="return false;" autocomplete="off"> -->
                      </div>


                      <!-- <div class="form-group form-group-vertical col-xs-12 col-sm-6">
                        <label class="form-label">Eligible Units </label>
                        <input class="form-control" name="EligibleUnits" formControlName="EligibleUnits"
                          placeholder="5.5" disabled type="text" autocomplete="off">
                      </div> -->

                      <div class="form-group form-group-vertical col-xs-12 col-sm-12 pb-10">
                        <label class="form-label" style="margin-bottom: -2px;"> Comments
                        </label>
                        <span style="font-size: 12px;">{{leaveForm.get('ApplierRemarks').value}}
                        </span>

                      </div>






                    </div>
                  </form>


                </div>
              </div>
            </div>

          </div>
        </div>

        <div class="modal-footer">
          <div class="row" style="width:100%">
            <div class="col-lg-6 pull-left">

              <!-- <div data-cy="remaining-allowance-amount" style="font-size: 0.85rem;"> Leave balance : {{remainingDays}}
                days
                remaining to take
              </div> -->

            </div>

            <div class="col-lg-6 pull-right">
              <button type="submit" (click)="do_approve_reject(true)" style="width: 45%;border-radius: 20px;"
                class="btn upgrade-btn"><i class="mdi mdi-check-all  m-r-xs"></i> Approve
              </button> &nbsp;

              <button type="button" class="btn btn-danger" id="btn_qc_reject" style="width: 45%;border-radius: 20px;"
                (click)="do_approve_reject(false)">
                <i class="mdi mdi-close-circle  m-r-xs"></i> Reject
              </button>

            </div>
          </div>
        </div>
      </div>
    </div>


    <div id="popup_viewEntitlement" class="modal fade" tabindex="1" role="dialog" data-backdrop="static"
      data-keyboard="false" aria-labelledby="popup_viewEntitlement" aria-hidden="true">
      <div style="display: block;" class="modal fade show animated">
        <div class="modal-dialog modal-sm modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header" style="padding: 20px !important;">
              <div class="col-xs-11" style="margin-top: -5px; margin-bottom: -5px;">
                <small class="header-pretitle" style="color: #3a3a3a;font-weight: 600;">Entitlement
                  Balance</small>
              </div>

              <div class="modal-close" (click)="close_entitlementbalance()"
                style="margin-top: 5px;top: 7px !important;">
                <span class="mdi mdi-close pull-left"></span>
              </div>
            </div>
            <div class="modal-body">

              <div class="row" style="margin-bottom: -16px;">
                <div class="col-lg-8">
                  <div class="row">
                    <div class="col-xs-12  col-sm-12  p-r-50">

                      <div class="card"
                        style="border-width: 2px!important;border-style: solid!important; border-color: #c6f5d7;"
                        *ngFor="let item of _entitlementList">
                        <div class="card-header" style="background-color: white;border: none;padding: 10px;">
                          <span class="badge badge-soft-success" style="display: inline;">{{item.DisplayName}} </span>

                        </div>
                        <div class="card-body" style="background-color: #f3f8ff;padding: 10px;">
                          <div class="row align-items-center">
                            <div class="col">
                              <span style="font-size: 13px;font-weight: 600;"> Balance
                              </span> <br />
                              <span style="font-size: 11px;">Eligible :
                                {{item.EligibleUnits}} - Available :
                                {{item.AvailableUnits}} </span>


                            </div>

                          </div>
                        </div>
                        <!-- <div class="card-footer" style="background-color: white;border: none;padding: 10px;">
                      <div class="row">
                        <div class="col-lg-6">
                          <span style="font-size: 13px; color: #1890ff; font-weight: 600;" >{{item.AppliedUnits}} day(s)</span> <br/>
                          <span style="font-size: 11px;"> Comments : {{item.ApplierRemarks}} </span>
                        </div>
                        
                      </div>
                    
                    </div> -->
                      </div>


                      <!-- <div class="carbox" style="border-left: 4px solid #59D09E;" *ngFor="let i of _entitlementList">
                    <div class="carbox-content" style="padding-left: 10px; margin-top: 10px;">
                      <h6 class="carbox-title">
                        {{i.DisplayName}}
                        <div class="muted" style="font-size: 10px;">
                          Available : {{i.AvailableUnits}}
                          &nbsp;Â·&nbsp; Eligible : {{i.EligibleUnits}}
                        </div>
                      </h6>
                    </div>
                  </div> -->
                    </div>
                  </div>
                </div>
                <div class="col-lg-4"
                  style="margin-top: -16px;background-color: #eff9fe;border-bottom-right-radius: 22px;">
                  <img src="assets/Images/entitlement.svg">
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- APPLY LEAVE REQUEST APPROVAL SLIDER  -->


    <div id="documentviewer2" class="modal fade" tabindex="1" role="dialog" data-backdrop="static" data-keyboard="false"
      aria-labelledby="documentviewer2" aria-hidden="true">
      <div style="display: block;" class="modal fade show ">
        <div class="modal-dialog modal-lg modal-dialog-centered" >
          <div class="modal-content" style="box-shadow: #00000096 1px 14px 15px !important;">
            <div class="modal-header" style="padding: 15px !important;">
              <div class="col-md-8">
                <small class="header-pretitle" style="float: left; width: 100%;"><b
                    style="float: left;">Documents</b></small>
                <h6 class="modal-title subheader_h6 text-left" id="popup_release_AL">Preview</h6>
              </div>
              <div class="col-md-4" style="top: 13px;">
                <div class="modal-close" (click)="close_documentviewer2()" style="margin-top: -22px;">
                  <span class="mdi mdi-close pull-left"></span>
                </div>
                <div style="margin-top: -8px;float: right;margin-right: 33px">
                  <app-filedownload [documentId]="leaveForm.get('AdditionalDocumentId').value">
                  </app-filedownload>
                </div>
              </div>
            </div>


            <div class="modal-body">
              <div class="iframe-container" *ngIf="contentmodalurl == null"
                style="  border: 1px solid #d3d3d3 !important; border-radius: 1rem;">
                <span>
                  <i class="mdi mdi-cached mdi-spin" style="text-align: center;font-weight: 600;font-size: 16px;">
                    &nbsp; Please wait...</i>
                  <span class="sr-only">Please wait...</span>
                </span>
              </div>
              <div class="iframe-container" *ngIf="contentmodalurl != null"
                style="  border: 1px solid #d3d3d3 !important; border-radius: 1rem;height: 20rem;">

                <iframe [src]="contentmodalurl" frameborder="0" scrolling="yes"
                width="100%" height="600px"></iframe>
              
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>



    <div id="documentviewer" cdkDrag class="modal fade grabbable" cdkDragRootElement="grabbable" tabindex="-1" role="dialog" aria-labelledby="documentviewer" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-centered" style="max-width: 1030px;">
          <div class="modal-content">
            <div class="modal-header" style="padding: 15px !important;">
              <div class="col-md-8">
                <small class="header-pretitle" style="float: left; width: 100%;"><b
                    style="float: left;">Documents</b></small>
                <h6 class="modal-title subheader_h6 text-left" id="popup_release_AL">Preview</h6>
              </div>
              <div class="col-md-4" style="top: 13px;">
                <div class="modal-close" (click)="close_documentviewer3()" style="margin-top: -22px;">
                  <span class="mdi mdi-close pull-left"></span>
                </div>
                <div style="margin-top: -8px;float: right;margin-right: 33px">
                  <app-filedownload [documentId]="leaveForm.get('AdditionalDocumentId').value">
                  </app-filedownload>
                </div>
              </div>
            </div>

              <div class="modal-body" style="overflow: auto !important;">
  
                  <div class="iframe-container" *ngIf="docList?.length == 0" style="  border: 1px solid #d3d3d3 !important; border-radius: 1rem;">
                      <span>
                          <i class="mdi mdi-cached mdi-spin" style="text-align: center;font-weight: 600;font-size: 16px;">
                              &nbsp; Please wait...</i>
                          <span class="sr-only">Please wait...</span>
                      </span>
                  </div>
                  <ng-container *ngIf="docList?.length > 0">
                      <div class="iframe-container" *ngFor="let item of docList" style="  border: 1px solid #d3d3d3 !important; border-radius: 1rem;margin-bottom: 10px">
                          <iframe [src]="item.ImageURL" frameborder="0" scrolling="yes" width="100%" height="600px"></iframe>
                          <div><span style="top: 0 !important;
                              left: 0px !important;
                              position: absolute !important;
                              z-index: 5;
                              height: 25px !important;
                              vertical-align: top;
                              opacity: inherit;
                              bottom: unset !important;
                              right: unset !important;
                              background: #c9c9c7;
                              width: 30%;
                              padding-left: 5px;
                              opacity: 0.9;">{{item.name}}  </span></div>
  
                         
                      </div>
                  </ng-container>                   
  
              </div>
              
          </div>
      </div>
  </div>