<div class="page-wrapper">
    <div class="page-content">
        <div class="">
            <app-loading-screen></app-loading-screen>

            <div class="text-center ma-5" *ngIf="spinner">
                <button class="btn btn-default p-l-30 p-r-30" type="button" disabled>
                    <span class="spinner-border spinner-border-sm m-r-10 primary-color" role="status"
                        aria-hidden="true"></span>
                    Please wait...
                </button>
            </div>


            <div class="row m-t-b-10" id="navbar" *ngIf="!spinner">

                <div class="col-lg-6 col-md-6 col-xs-12 col-xxs-12 col-12">
                    <ul class="list-inline">
                        <li class="list-inline-item">
                            <h4 class=" ">Self Service Request </h4>
                        </li>
                    </ul>
                </div>
                <div class="col-lg-6 col-md-6 col-xs-12 col-xxs-12 col-12 text-right">
                    <div class="text-right">
                        <ul class="list-inline">

                            <!-- <li class="list-inline-item">
                            <button type="button" class="btn btn-primary" (click)="updateCandidateQCInfo(false, false)">
                              <i class="mdi mdi-content-save  m-r-xs"></i> Save
                            </button></li>  -->

                            <li class="list-inline-item" *ngIf="!IsPennyDropVerificationMode">
                                <button type="button" class="btn upgrade-btn" id="btn_qc_approve" (click)="updateCandidateQCInfo(true, true)"> <i
                                        class="mdi mdi-checkbox-marked-circle  m-r-xs"></i> Approve
                                </button>
                            </li>
                            <li class="list-inline-item" *ngIf="!IsPennyDropVerificationMode">
                                <button type="button" class="btn btn-danger" id="btn_qc_reject" (click)="updateCandidateQCInfo(true, false)"> <i
                                        class="mdi mdi-checkbox-marked-circle  m-r-xs"></i> Reject
                                </button>
                            </li>

                            <li class="list-inline-item" *ngIf="IsPennyDropVerificationMode">
                                <button type="button" class="btn btn-primary" id="btn_qc_approve" (click)="updateCandidateQCInfo(true, true)"> <i
                                        class="mdi mdi-checkbox-marked-circle  m-r-xs"></i> Confirm
                                </button>
                            </li>

                            <li class="list-inline-item">
                                <button class="btn btn-sm btn-default" type="button" (click)="confirmExit()" tooltip="Close" tooltip-placement="bottom">
                                    <i class="mdi mdi-close font-size-md"></i>
                                </button>
                            </li>

                        </ul>
                    </div>
                </div>

            </div>

            <br>


            <div class="content m-b report-content" *ngIf="!spinner">

                <div id="overlay">
                    <div class="w-100 d-flex justify-content-center align-items-center">
                        <div class="spinner"></div>
                    </div>
                </div>








                <div style="margin-top:1em;" class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <small class="form-text text-muted">Employee Name </small>
                            <label class="qcsummarylabel form-text text-muted">
                                {{newEmployeeDetails?.FirstName}}
                            </label>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <small>Employee Code</small>
                            <label class="qcsummarylabel form-text text-muted">
                                {{newEmployeeDetails?.Code}}
                            </label>

                        </div>
                    </div>
                    <!-- <div class="col-md-4">
                          <div class="form-group">
                              <small>Initiated By </small>
                              <label class="qcsummarylabel form-text text-muted">
                                  {{objCandidateQualityCheckModel?.InitiatedDetails}}
                              </label>
  
                          </div>
                      </div> -->
                    <!-- <div class="col-md-4">
                              <div class="form-group">
                                  <small>Onboarding Type </small>
                                  <label class="qcsummarylabel form-text text-muted">
                                      <span *ngIf="objCandidateQualityCheckModel?.OnBoardingType==1">
                                          Flash
                                      </span>
                                      <span *ngIf="objCandidateQualityCheckModel?.OnBoardingType==2">
                                          Proxy
                                      </span>
                                  </label>
      
                              </div>
                          </div> -->


                    <!-- <div class="col-md-4">
                          <div class="form-group">
                              <small>Submitted By </small>
                              <label class="qcsummarylabel form-text text-muted">
                                  {{objCandidateQualityCheckModel?.SubmittedDetails}}</label>
                          </div>
                      </div> -->


                    <!-- <div class="col-md-4">
                          <div class="form-group">
                              <small>UAN </small>
                              <label class="qcsummarylabel form-text text-muted">
                                  {{objCandidateQualityCheckModel?.LstCandidateStatutoryDtls[0]?.UAN}}</label>
                          </div>
                      </div>
                      <div class="col-md-4">
                          <div class="form-group">
                              <small>ESIC </small>
                              <label class="qcsummarylabel form-text text-muted">
                                  {{objCandidateQualityCheckModel?.LstCandidateStatutoryDtls[0]?.ESICNumber}}</label>
                          </div>
                      </div>
                      <div class="col-md-4">
                          <div class="form-group">
                              <small>PAN </small>
                              <label class="qcsummarylabel form-text text-muted">
                                  {{objCandidateQualityCheckModel?.LstCandidateStatutoryDtls[0]?.PAN}}</label>
                          </div>
                      </div>
                      <div class="col-md-4">
                          <div class="form-group">
                              <small>PFN </small>
                              <label class="qcsummarylabel form-text text-muted">
                                  {{objCandidateQualityCheckModel?.LstCandidateStatutoryDtls[0]?.PFNumber}}</label>
                          </div> tooltip="<p><span class='qcsummarylabel form-text'>Preview ctc as per</span></p>" theme="light"
                      </div> -->

                </div>



                <div class="row">

                    <div class="col-sm-12">


                        <div class="qccard">
                            <div class="qccontainer">
                                <span class="qcheader">Bank Details</span>



                                <table class="qcTable table table-bordered table-condensed ">
                                    <thead>
                                        <tr>
                                            <th>Account Holder</th>
                                            <th>Account Number | Bank Name | IFSC</th>
                                            <th class="fitToContent">View</th>
                                            <th class="fitToContent">Status</th>
                                            <th class="qcRemarks">Remarks</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ng-container *ngFor="let item of newEmployeeDetails.lstEmployeeBankDetails ; let i = index;">
                                            <tr *ngIf="item.ModuleProcessTransactionId == _ModuleProcessId">

                                                <td>
                                                    {{item.AccountHolderName}} <i class="fa fa-info-circle" style="color: red;" *ngIf="item.VerificationMode != null && item.VerificationMode == '2'" aria-hidden="true" matTooltip="{{item.Remarks}}"></i>
                                                </td>
                                                <td>
                                                    {{item.AccountNumber}} | {{item.BankName}} | {{item.IdentifierValue}}
                                                </td>
                                                <td class="centerAlignLink">

                                                    <!-- <i *ngIf="item.CandidateDocumentId"
                                                        tooltip="Preview"
                                                        (click)="openmodalpopupdocument('Bank Account Details', item,'Account Number | Bank Name | IFSC')"
                                                        class="fa fa-external-link"></i> -->
                                                    <i *ngIf="item.CandidateDocumentId && checkIsZipFile(item, 'ClientApproval') == false" tooltip="Preview" (click)="openmodalpopupdocument('Bank Account Details', item,'Account Number | Bank Name | IFSC')" class="fa fa-external-link"></i>
                                                    <i *ngIf="item.CandidateDocumentId && checkIsZipFile(item, 'ClientApproval') == true" matTooltip="View Document" (click)="getFileList('Bank Account Details', item, 'Account Number | Bank Name | IFSC')" class="fa fa-external-link"></i>

                                                </td>

                                                <td class="centerAlign" class="font-col" *ngIf="item.VerificationMode == null || item.VerificationMode != '2'">
                                                    <!-- {{item.ApprovalStatus}} -->
                                                    <span class="badge badge-warning" *ngIf="item.Status == 0">
                                                        {{ApprovalStatusEnumValues[item.Status]}}</span>
                                                    <span class="badge badge-danger" *ngIf="item.Status == 2">
                                                        {{ApprovalStatusEnumValues[item.Status]}}</span>
                                                    <span class="badge badge-success" *ngIf="item.Status == 1">
                                                        {{ApprovalStatusEnumValues[item.Status]}}</span>

                                                </td>
                                                <td *ngIf="item.VerificationMode != null && item.VerificationMode == '2'">
                                                    <span class="badge badge-success">
                                                        Approved </span>
                                                </td>

                                                <td *ngIf="item.VerificationMode != null && item.VerificationMode == '2'">
                                                    The bank details were checked using the penny drop mode(one cent deposit method)

                                                    <!-- <input id="Remarks" onkeypress="return /^[a-zA-Z \s]+$/i.test(event.key)" class="form-control" maxlength="100" placeholder="Remarks" (input)="onChangeBankDetailsRemarks(i,'Remarks',$event.target.value)" value="{{item.Remarks}}"> -->
                                                </td>
                                                <td *ngIf="item.VerificationMode == null || item.VerificationMode != '2'">
                                                    {{item.Remarks}}
                                                    <!-- <input id="Remarks" onkeypress="return /^[a-zA-Z \s]+$/i.test(event.key)" class="form-control" maxlength="100" placeholder="Remarks" (input)="onChangeBankDetailsRemarks(i,'Remarks',$event.target.value)" value="{{item.Remarks}}"> -->
                                                </td>

                                            </tr>
                                        </ng-container>
                                    </tbody>
                                </table>
                            </div>
                        </div>



                    </div>

                    <div class="col-sm-12">


                        <div class="qccard">
                            <div class="qccontainer">
                                <span class="qcheader"> Overall Remarks

                                    <!-- <label class="switch" style="margin-top: 6px">
                                    <input formcontrolname="chkApproved"
                                        [(ngModel)]="objCandidateQualityCheckModel.OverallApprovalStatus"
                                        type="checkbox">
                                    <span class="slider round"></span>
                                </label> Approve Request -->
                                </span>


                                <textarea style="margin-top: 1rem; margin-bottom:1rem;" class="form-control" rows="5" spellcheck="true" name="OverallRemarks" [(ngModel)]="OverallRemarks" placeholder="Overall Remarks" autocomplete="off">
                                        </textarea>
                                <!-- onkeypress="return /^[a-zA-Z \s]+$/i.test(event.key)" -->
                            </div>
                        </div>

                    </div>

                </div>





            </div>
        </div>

    </div>
</div>

<div id="modaldocumentviewer" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modaldocumentviewer" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">

                <div class="col-md-8">
                    <h4 class="modal-title" id="modaldocumentviewer">{{currentModalHeading}} - {{ApprovalStatusEnumValues[currentModalItem?.Status]}}
                    </h4>
                    <div class="form-group">
                        <!-- <small class="form-text text-muted">
                          {{currentModalDetailsFormat}}
                      </small>
                      <label class="form-text text-muted">
                          {{currentModalItem?.Details}}
                      </label> -->
                    </div>
                </div>
                <div class="col-md-4" style="top: 13px;">
                    <a class="icon btn-icon pull-right m-l-n-xxxl chrome-back-btn m-t-n-sm" data-dismiss="modal" (click)="clearUrl()"><i class="mdi mdi-close font-size-md icon-close"></i></a>

                    <div style="float: right;margin-right: 45px;margin-top: -3px;">
                        <app-filedownload [documentId]="currentModalItem?.CandidateDocument.DocumentId">
                        </app-filedownload>
                    </div>

                    <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="clearUrl()"><span aria-hidden="true">&times;</span></button> -->
                </div>



            </div>
            <div class="modal-body">
                <div class="row">

                    <div class="col-md-12">
                        <div class="form-group">
                            <label>Bank Name | Bank Branch Name | Account Number | IFSC | Account Holder Name</label>
                            <small class="form-text text-muted" *ngIf="currentModalItem">
                                {{currentModalItem.BankName}} | {{currentModalItem.BankBranchName}} |
                                {{currentModalItem.AccountNumber}} | {{currentModalItem.IdentifierValue}} |
                                {{currentModalItem.AccountHolderName}}
                            </small>
                        </div>
                    </div>

                </div>

                <!-- <div class="row">
                  <iframe style="width: 100%;min-height: 400px" src='../../../../assets/Images/fileloader.gif'
                      [src]="contentmodalurl"></iframe></div> -->

                <!-- <div class="wrapper"> -->
                <div class="iframe-container" *ngIf="contentmodalurl == null" style="  border: 1px solid #d3d3d3 !important; border-radius: 1rem;">
                    <img src="assets/Images/clientlogo/{{clientminiLogoLink}}">
                    <span>
                        <i class="mdi mdi-cached mdi-spin" style="text-align: center;font-weight: 600;font-size: 16px;">
                            &nbsp; Please wait...</i>
                        <span class="sr-only">Please wait...</span>
                    </span>
                </div>

                <div class="iframe-container" *ngIf="contentmodalurl != null" style=" height: 350px; border: 1px solid #d3d3d3 !important; border-radius: 1rem;">

                    <iframe width="100%" height="100%" [src]="contentmodalurl" frameborder="0" scrolling="yes"></iframe>
                    <img style="top: 0 !important;
                  right: 0px !important;
                  position: absolute !important;
                  z-index: 9;
                  height: 55px !important;
                  vertical-align: top;
                  opacity: inherit;
                  bottom: unset !important;
                  left: unset !important;" src="../../../../assets/Images/clientlogo/{{clientLogoLink}}">
                </div>
            </div>
            <!-- </div> -->




            <div class="modal-footer">
                <div class="col-md-8">
                    <div class="form-group">
                        <small class="form-text text-muted">Remarks</small>
                        <div>
                            <label></label>
                            <textarea rows="2" style="width: 100%; border-radius: 3px;" [(ngModel)]="RejectionRemarks"></textarea>
                        </div>

                    </div>
                </div>
                <div class="col-md-4" style="padding-left:0px;padding-right:0px;">
                    <!-- <button type="button" class="btn upgrade-btn" [disabled]="!disableBtn"
                      (click)="doSaveOrSubmit('Approve')"> <i
                          class="mdi mdi-checkbox-marked-circle  m-r-xs" style="margin-top:3rem;margin-right:6px;"></i> Approve
                  </button>
                  <button type="button" class="btn btn-danger" [disabled]="!disableBtn"
                  (click)="doSaveOrSubmit('Reject')"> <i
                      class="mdi mdi-checkbox-marked-circle  m-r-xs" style="margin-top:3rem;"></i> Reject
              </button> -->
                    <button class="btn btn-default btn-sm" (click)="validateDocument(true)">
                        <i class="mdi mdi-checkbox-marked-circle  m-r-xs" style="margin-top:3rem;margin-right:6px;"></i>
                        Approve</button> &nbsp;
                    <button class="btn btn-default btn-sm" (click)="validateDocument(false)">
                        <i class="mdi mdi-close-circle  m-r-xs" style="margin-top:3rem;margin-right:6px;"></i>
                        Reject&nbsp;</button>
                </div>
            </div>
        </div>
    </div>
</div>




<div id="documentviewer" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="documentviewer" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">

                <div class="col-md-8">
                    <h4 class="modal-title" id="documentviewer">{{currentModalHeading}} - {{ApprovalStatusEnumValues[currentModalItem?.ApprovalStatus]}}
                    </h4>
                    <div class="form-group">
                        <small class="form-text text-muted">
                            {{currentModalDetailsFormat}}
                        </small>
                        <label class="form-text text-muted">
                            {{currentModalItem?.Details}}
                        </label>
                    </div>
                </div>
                <div class="col-md-4" style="top: 13px;">
                    <a class="icon btn-icon pull-right m-l-n-xxxl chrome-back-btn m-t-n-sm" data-dismiss="modal" (click)="clearUrl()"><i class="mdi mdi-close font-size-md icon-close"></i></a>

                    <div style="float: right;margin-right: 45px;margin-top: -3px;">
                        <app-filedownload [documentId]="DocumentId">
                        </app-filedownload>
                    </div>

                </div>



            </div>
            <div class="modal-body" style="overflow: auto !important;">

                <div class="iframe-container" *ngIf="docList?.length == 0" style="  border: 1px solid #d3d3d3 !important; border-radius: 1rem;">
                    <img src="assets/Images/clientlogo/{{clientminiLogoLink}}">
                    <span>
                        <i class="mdi mdi-cached mdi-spin" style="text-align: center;font-weight: 600;font-size: 16px;">
                            &nbsp; Please wait...</i>
                        <span class="sr-only">Please wait...</span>
                    </span>
                </div>
                <ng-container *ngIf="docList?.length > 0">
                    <div class="iframe-container" *ngFor="let item of docList" style="  border: 1px solid #d3d3d3 !important; border-radius: 1rem;margin-bottom: 10px">
                        <iframe [src]="item.ImageURL" frameborder="0" scrolling="yes"></iframe>
                        <div><span style="top: 0 !important;
                            left: 0px !important;
                            position: absolute !important;
                            z-index: 5;
                            height: 25px !important;
                            vertical-align: top;
                            opacity: inherit;
                            bottom: unset !important;
                            right: unset !important;
                            background: #c9c9c7;
                            width: 30%;
                            padding-left: 5px;
                            opacity: 0.9;">{{item.name}}  </span></div>

                        <img style="top: 0 !important;
                    right: 0px !important;
                    position: absolute !important;
                    z-index: 9;
                    height: 55px !important;
                    vertical-align: top;
                    opacity: inherit;
                    bottom: unset !important;
                    left: unset !important;" src="../../../../assets/Images/clientlogo/{{clientLogoLink}}">

                    </div>
                </ng-container>
                <!-- <ng-container *ngIf="docList?.length > 0">

                    <div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#carouselExampleCaptions" *ngFor="let item of docList;let index = index" [attr.data-slide-to]="index"></li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="carousel-item" *ngFor="let item of docList;let index = index;let isFirst = first" [ngClass]="{active:isFirst}">
                                <img [src]="item.ImageURL" class="d-block w-100" [alt]="item.name">
                                <div class="carousel-caption d-none d-md-block">
                                    <h5 [textContent]="item.name"></h5>
                                </div>
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </ng-container> -->



            </div>

            <div class="modal-footer">
                <div class="col-md-9">
                    <div *ngIf="currentModalItem" class="form-group">
                        <small class="form-text text-muted">Remarks</small>
                        <div *ngIf="currentModalItem.RejectionRemarks != undefined">
                            <label>{{currentModalItem.Remarks}}</label>
                            <textarea rows="2" style="width: 100%; border-radius: 3px;" [(ngModel)]="currentModalItem.RejectionRemarks"></textarea>
                        </div>
                        <div *ngIf="currentModalItem.RejectionRemarks == undefined">
                            <textarea rows="2" style="width: 100%; border-radius: 3px;" [(ngModel)]="currentModalItem.Remarks"></textarea>
                        </div>
                    </div>
                </div>
                <div class="col-md-3" style="padding-left:0px;padding-right:0px;">
                    <button class="btn btn-default btn-sm" (click)="validateDocument(true)">
                        <i class="mdi mdi-checkbox-marked-circle  m-r-xs" style="margin-top:3rem;margin-right:6px;"></i>
                        Approve</button> &nbsp;
                    <button class="btn btn-default btn-sm" (click)="validateDocument(false)">
                        <i class="mdi mdi-close-circle  m-r-xs" style="margin-top:3rem;margin-right:6px;"></i>
                        Reject&nbsp;</button>
                </div>
            </div>
        </div>
    </div>
</div>