<div class="page-wrapper">
  <div class="page-content">
    <app-loading-screen></app-loading-screen>

    <div class="text-center ma-5" *ngIf="spinner">
      <button class="btn btn-default p-l-30 p-r-30" type="button" disabled>
        <span class="spinner-border spinner-border-sm m-r-10 primary-color" role="status" aria-hidden="true"></span>
        Please wait...
      </button>
    </div>

    <!-- Buttons -->
    <div class="row" *ngIf="!spinner">
      <div class="col-lg-6 col-xs-12 col-sm-12">
        <div class="headerbar">
          <div>
            <h2 class="header_title">Full & Final Settlement</h2>
            <!-- <p class="subheader_title">
              Your web analytics dashboard template.
            </p> -->
          </div>

        </div>
      </div>

      <div class="col-lg-6 col-xs-12 col-sm-12  text-right " *ngIf="!spinner">
        <ul class="list-inline">
          <li class="list-inline-item" *ngIf="( index == 0) && (isEmployee && !isManager && roleCode !== 'PayrollOps' && 
            roleCode !== 'PayrollAdmin' && roleCode !== 'OpsMember' )">
            <button class="btn upgrade-btn " type="Submit" name="btnSubmit" id="btnSubmit"
              (click)="submit(true , true , false)">
              <div class="pos-rlt sm-btn-component"> <span> <i class="mdi mdi-checkbox-multiple-marked-outline"></i>
                  Submit </span></div>
            </button>
          </li>
          <li class="list-inline-item" *ngIf="(index == 1) && (isManager)"> <button class="btn btn-danger "
              (click)="submit(false , true, false)">
              <div class="pos-rlt sm-btn-component"> <span> <i class="mdi mdi-close-circle"></i>
                  Reject </span></div>
            </button>
          </li>
          <li class="list-inline-item" *ngIf="(index == 1) && (isManager)"> <button class="btn upgrade-btn "
              (click)="submit(true , true , false)">
              <div class="pos-rlt sm-btn-component"> <span> <i class="mdi mdi-checkbox-multiple-marked-circle"></i>
                  Approve </span></div>
            </button>
          </li>
          <!-- <li class="list-inline-item"  *ngIf="(index == 4) "> <button class="btn upgrade-btn "  (click)="submitForVerification()">
            <div class="pos-rlt sm-btn-component"> <span> <i class="mdi mdi-checkbox-multiple-marked-circle"></i>
                Submit to Qc </span></div>
          </button>
          </li> -->
          <li class="list-inline-item"
            *ngIf="index == 4 && (roleCode == 'RegionalHR' && isAllenClient || roleCode == 'PayrollOps' && !isAllenClient)">
            <button class="btn upgrade-btn"
              (click)="submit(true , false , true , false , fnfPayPeriodId == teamOpenPayPeriodId)">
              <div class="pos-rlt sm-btn-component"> <span> <i class="mdi mdi-checkbox-multiple-marked-outline"></i>
                  Submit </span></div>
            </button>
          </li>

          <li class="list-inline-item">

            <button class="btn btn-default btn-bold" tooltip="Close" (click)="confirmExit()" tooltip-placement="bottom"
              data-original-title="" title="">
              <i class="mdi mdi-close font-size-md"></i>
            </button>
          </li>

        </ul>
      </div>
    </div>

    <div class="content  report-content" style=" margin-top: -15px; margin-bottom: 25px;"
      *ngIf="!spinner && index == 1 && lwdBeforeLastPayDate">
      <p><strong>Important!</strong> LWD is on or before last pay date({{lastPayDate}}).</p>
      <p>Please Consider Recovery Days : {{recoveryDays}}</p>
      <p>If this is a nill case termination please input below</p>
    </div>

    <!-- Main Block -->
    <div class="content m-b report-content" style="margin-top: -15px;" *ngIf="!spinner">
      <div class="row  m-b-4rem">

        <!-- stepper -->
        <div class="col-lg-12 p-2rem" *ngIf="stepper">



          <nz-steps [nzCurrent]="index" (click)="onIndexChange($event)">
            <!-- <nz-step nzTitle="Resignation Details" nzStatus="finish" nzIcon="user"></nz-step>
            <nz-step nzTitle="Notice Period" nzStatus="finish" nzIcon="solution"></nz-step>
            <nz-step nzTitle="Leave Encashment" nzStatus="process" nzIcon="loading"></nz-step>
            <nz-step nzTitle="Variable and graduity " nzStatus="wait" [nzIcon]="iconTemplate"></nz-step>
            <nz-step nzTitle="Pay Process" nzStatus="wait" [nzIcon]="iconTemplate"></nz-step> -->

            <!-- <ng-template #iconTemplate><i nz-icon nzType="smile"></i></ng-template> -->
            <!-- <nz-step nzTitle="Termination Details"
            [nzIcon]="index == 0 ? 'loading' : 'file-search'" nzDescription="Step 1"></nz-step> -->
            <nz-step [nzTitle]="isResignation ? 'Resignation Details' : 'Separation Details'"
              [nzStatus]="index == 0 ? 'process' : 'finish'" [nzIcon]="'user-delete'" nzDescription="Step 1"></nz-step>
            <nz-step *ngIf="isClientSPOC" nzTitle="Notice Period" [nzStatus]="index == 1 ? 'process' : 'finish'"
              [nzIcon]="'calendar'" nzDescription="Step 2"></nz-step>
            <nz-step *ngIf="isClientSPOC && !isManager" nzTitle="Leave Encashment"
              [nzStatus]="index == 2 ? 'process' : 'finish'" [nzIcon]="'dollar'" nzDescription="Step 3"></nz-step>
            <nz-step *ngIf="isClientSPOC && !isManager" nzTitle="Variable and gratuity"
              [nzStatus]="index == 3 ? 'process' : 'finish'" [nzIcon]="'wallet'" nzDescription="Step 4"></nz-step>
            <nz-step *ngIf="isClientSPOC && !isManager" nzTitle="Pay Process"
              [nzStatus]="index == 4 ? 'process' : 'finish'" [nzIcon]="'schedule'" nzDescription="Step 5"></nz-step>
          </nz-steps>
        </div>

        <!-- Left Side Static Data -->
        <div class="col-lg-5 col-md-5 col-sm-6 col-xs-12 vdivide m-t-2">
          <div class="headerbar-right">
            <div class="media">
              <div class="media-body">
                <label>Employee</label>
                <h6>{{label_EmployeeCode}} | {{label_EmployeeName}} </h6>
              </div>
            </div>
            <!-- <div class="media">
              <div class="media-body">
                <label>Employee Name</label>
                <h6>{{label_EmployeeName}}</h6>
              </div>
            </div> -->
            <div class="media">
              <div class="media-body">
                <label>Designation</label>
                <h6>{{label_Designation}}</h6>
              </div>
            </div>
          </div>
          <!-- <div class="headerbar-right">
            <div class="media">
              <div class="media-body">
                <label>Manager Code</label>
                <h6>14545</h6>
              </div>
            </div>
            <div class="media">
              <div class="media-body">
                <label>Manager Name</label>
                <h6>{{label_ManagerName}}</h6>
              </div>
            </div>
          </div> -->
          <div class="headerbar-right">
            <div class="media">
              <div class="media-body">
                <label>Client</label>
                <h6>{{label_ClientName}}</h6>
              </div>
            </div>
          </div>
          <div class="headerbar-right" *ngIf="index === 0 || index === 1">
            <div class="media">
              <div class="media-body">
                <label>Date Of Joining</label>
                <h6>{{dateOfJoining | date }}</h6>
              </div>
            </div>
            <div class="media">
              <div class="media-body">
                <label>Last Payment Date</label>
                <h6>{{lastPayDate | date }}</h6>
              </div>
            </div>

          </div>
          <div class="headerbar-right" *ngIf="index === 2 ||index == 3 ||index === 4">
            <div class="media">
              <div class="media-body">
                <label>Date Of Joining</label>
                <h6>{{dateOfJoining | date }}</h6>
              </div>
            </div>
          </div>

          <div class="headerbar-right" *ngIf="index === 4">
            <div class="media">
              <div class="media-body">
                <label>Salary Start Date</label>
                <h6>{{g.AttendanceStartDate.value | date}}</h6>
              </div>
            </div>
            <div class="media">
              <div class="media-body">
                <label>Salary End Date</label>
                <h6>{{g.CalculatedLastWorkingDate.value | date}}</h6>
              </div>
            </div>
          </div>
        </div>

        <!-- Main Form -->
        <div class="col-lg-7 col-md-7 col-sm-6 col-xs-12 m-t-2">
          <form [formGroup]="ff_Form">
            <!-- Termination -->

            <!-- <label class="form-label" *ngIf="index == 0 && this.isAllenClient">Current Pay Period Start Date - <b> {{
              fnfPayPeriodStartDate | date: 'MMM d, y'}} </b> </label> -->

            <label class="form-label" *ngIf="index == 0 && this.isAllenClient">Current Attendance Cycle Start Date - <b>{{
              g.AttendanceStartDate.value | date: 'MMM d, y'}} </b></label>
            <div class="row" *ngIf="index == 0 && !isResignation">
              <div class="form-group form-group-vertical col-xs-12 col-sm-6"
                *ngIf="getAttendanceStartDateFromUser && !this.isAllenClient">
                <label class="form-label">Attendance Start Date
                </label>
                <input type="text" class="form-control" bsDatepicker placement="bottom"
                  [bsConfig]="{ isAnimated: true, dateInputFormat:'YYYY-MM-DD',containerClass:'theme-default' }"
                  name="AttendanceStartDate" formControlName="AttendanceStartDate"
                  [ngClass]="{'is-invalid': submitted && g.AttendanceStartDate.errors }" placeholder="12-12-2020"
                  autocomplete="off" [minDate]="AttendanceStartDate" [maxDate]="lastWorkingDate">
                <div *ngIf="submitted && g.AttendanceStartDate.errors" class="invalid-feedback">
                  <div *ngIf="g.AttendanceStartDate.errors.required">Attendance Start Date is required
                  </div>
                </div>
              </div>

              <div class="form-group form-group-vertical col-xs-12 col-sm-6">
                <label class="form-label">Separation Date
                </label>
                <input type="text" class="form-control" bsDatepicker placement="bottom"
                  [bsConfig]="{ isAnimated: true, dateInputFormat:'YYYY-MM-DD',containerClass:'theme-default' }"
                  name="TerminationStartDate" formControlName="TerminationStartDate"
                  [ngClass]="{'is-invalid': submitted && g.TerminationStartDate.errors }" placeholder="12-12-2020"
                  autocomplete="off">
                <div *ngIf="submitted && g.TerminationStartDate.errors" class="invalid-feedback">
                  <div *ngIf="g.TerminationStartDate.errors.required">Separation Date is required
                  </div>
                </div>
              </div>

              <div class="form-group form-group-vertical col-xs-12 col-sm-6">
                <label class="form-label">Separation Reason</label>
                <ng-select [items]="lst_ResignationReason" placeholder="Select an Option"
                  formControlName="TerminationReason"
                  [ngClass]="{'ng-touched': submitted && g.TerminationReason.invalid }" bindLabel="name" bindValue="id">
                </ng-select>
                <div *ngIf="submitted && g.TerminationReason.invalid" class="help-block">
                  <div *ngIf="g.TerminationReason.errors.required">Separation Reason is required
                  </div>
                </div>
              </div>
              <div class="form-group form-group-vertical col-xs-12 col-sm-6">
                <label class="form-label">Last Working Date
                </label>
                <input type="text" class="form-control" bsDatepicker placement="top"
                  [bsConfig]="{ isAnimated: true, dateInputFormat:'YYYY-MM-DD',containerClass:'theme-default' }"
                  name="CalculatedLastWorkingDate" formControlName="CalculatedLastWorkingDate"
                  [ngClass]="{'is-invalid': submitted && g.CalculatedLastWorkingDate.errors }" placeholder="12-12-2020"
                  autocomplete="off">
                <div *ngIf="submitted && g.CalculatedLastWorkingDate.errors" class="invalid-feedback">
                  <div *ngIf="g.CalculatedLastWorkingDate.errors.required">Last Working Date is required
                  </div>
                </div>
              </div>

              <div class="form-group form-group-vertical col-xs-12 col-md-12 col-lg-12 col-sm-12">
                <label class="form-label"> Separation Remarks <span class="required">*</span></label>
                <textarea class="form-control" rows="2" spellcheck="false" id="TerminationRemarks"
                  formControlName="TerminationRemarks"
                  [ngClass]="{'ng-touched': submitted && g.TerminationRemarks.invalid }"></textarea>
                <div *ngIf="submitted && g.TerminationRemarks.invalid" class="help-block">
                  <div *ngIf="g.TerminationRemarks.errors.required">Separation Remarks is required
                  </div>
                </div>
              </div>

            </div>

            <!-- Resignation -->
            <div class="row" *ngIf="index == 0 && isResignation">
              <div class="form-group form-group-vertical col-xs-12 col-sm-6">
                <!-- *ngIf="roleCode != 'PayrollAdmin' && roleCode != 'OpsMember' && roleCode != 'PayrollOps' " -->
                <label class="form-label">Resignation Date
                </label>
                <input type="text" class="form-control" bsDatepicker placement="bottom"
                  [bsConfig]="{ isAnimated: true, dateInputFormat:'YYYY-MM-DD',containerClass:'theme-default' }"
                  name="ResignationDate" formControlName="ResignationDate" [maxDate]="lastWorkingDate"
                  [ngClass]="{'is-invalid': submitted && g.ResignationDate.errors }" placeholder="12-12-2020"
                  autocomplete="off">
                <div *ngIf="submitted && g.ResignationDate.errors" class="invalid-feedback">
                  <div *ngIf="g.ResignationDate.errors.required">Resignation Date is required
                  </div>
                </div>
              </div>

              <!-- <div class="form-group form-group-vertical col-xs-12 col-sm-6" *ngIf="getAttendanceStartDateFromUser">
                <label class="form-label">Attendance Start Date
                </label>
                <input type="text" class="form-control" bsDatepicker placement="bottom"
                  [bsConfig]="{ isAnimated: true, dateInputFormat:'YYYY-MM-DD',containerClass:'theme-default' }"
                  name="AttendanceStartDate"  formControlName="AttendanceStartDate" 
                  [ngClass]="{'is-invalid': submitted && g.AttendanceStartDate.errors }" placeholder="12-12-2020"
                  autocomplete="off" [minDate]="AttendanceStartDate" [maxDate]="lastWorkingDate" >
                <div *ngIf="submitted && g.AttendanceStartDate.errors" class="invalid-feedback">
                  <div *ngIf="g.AttendanceStartDate.errors.required">Attendance Start Date is required
                  </div>
                </div>
              </div> -->


              <div class="form-group form-group-vertical col-xs-12 col-sm-6">
                <label class="form-label">Last Working Date
                  <i class="fa fa-info-circle" aria-hidden="true" *ngIf="this.newObj.IsLWdEditAllowed == 0"
                    tooltip="This LWD has been processed in the previous pay period" tooltip-placement="top"></i>
                </label>
                <input type="text" class="form-control" bsDatepicker placement="top"
                  [bsConfig]="{ isAnimated: true, dateInputFormat:'YYYY-MM-DD',containerClass:'theme-default' }"
                  name="CalculatedLastWorkingDate" formControlName="CalculatedLastWorkingDate"
                  [ngClass]="{'is-invalid': submitted && g.CalculatedLastWorkingDate.errors }" placeholder="12-12-2020"
                  autocomplete="off">
                <div *ngIf="submitted && g.CalculatedLastWorkingDate.errors" class="invalid-feedback">
                  <div *ngIf="g.CalculatedLastWorkingDate.errors.required">Last Working Date is required
                  </div>
                </div>
              </div>
              <div class="form-group form-group-vertical col-xs-12 col-sm-6">
                <label class="form-label">Requested Relieving Date
                </label>
                <input type="text" class="form-control" bsDatepicker placement="bottom"
                  [bsConfig]="{ isAnimated: true, dateInputFormat:'YYYY-MM-DD',containerClass:'theme-default' }"
                  name="RequestedLastWorkingDate" formControlName="RequestedLastWorkingDate"
                  [ngClass]="{'is-invalid': submitted && g.RequestedLastWorkingDate.errors }" placeholder="12-12-2020"
                  autocomplete="off">
                <div *ngIf="submitted && g.RequestedLastWorkingDate.errors" class="invalid-feedback">
                  <div *ngIf="g.RequestedLastWorkingDate.errors.required">Requested Working Date is required
                  </div>
                </div>
              </div>

              <div class="form-group form-group-vertical col-xs-12 col-sm-6">
                <label class="form-label">Resignation Reason</label>
                <ng-select [items]="resignationReasons" placeholder="Select an Option"
                  formControlName="ResignationReason"
                  [ngClass]="{'ng-touched': submitted && g.ResignationReason.invalid }" bindLabel="Name" bindValue="Id">
                </ng-select>
                <div *ngIf="submitted && g.ResignationReason.invalid" class="help-block">
                  <div *ngIf="g.ResignationReason.errors.required">Resignation Reason is required
                  </div>
                </div>
              </div>
              <div class="form-group form-group-vertical col-xs-12 col-md-6 col-lg-6 col-sm-12">
                <label class="form-label"> Resignation Remarks <span class="required">*</span></label>
                <textarea class="form-control" rows="2" spellcheck="false" id="ResignationRemarks"
                  formControlName="ResignationRemarks"></textarea>
                <div *ngIf="submitted && g.ResignationRemarks.invalid" class="help-block">
                  <div *ngIf="g.ResignationRemarks.errors.required">Resignation Remarks is required
                  </div>
                </div>
              </div>

            </div>

            <!-- Notice Period -->
            <div class="row" *ngIf="index == 1">


              <div class="col-lg-12 col-md-12 col-sm-12" style="margin-top: -35px;">

                <!-- <ng-template #popContent let-greeting="greeting"><b>
                    It looks like you were misusing this feature by going too fast. Tell us if you think we made a mistake </b> <br/>  
                    <button class="btn btn-default-danger btn-sm btn-center"  (click)="cancelProcess()">
                       <span> <i class="mdi mdi-send-secure"></i>
                          Cancel Process </span>
                    </button>
                  </ng-template>
  
  
                  <div class="blob" [ngbPopover]="popContent" [popoverTitle]="popTitle" #p1="ngbPopover"
                    triggers="mouseenter"><i class="mdi mdi-information-outline blob_center_i"></i>
                  </div> -->
                <div class="row">
                  <div class="col" *ngIf="!spinner">
                    <div class="text-right">
                      <label class="form-label" id='nillCase'>Is Nil Case Termination</label>
                      <label class="el-switch el-switch-green">
                        <input type="checkbox" name="switch" value="yes" formControlName="IsNillCase">
                        <!-- (ngModelChange)="onChangeIsNillCase($event)"  -->
                        <span class="el-switch-style"></span>
                      </label>
                    </div>

                  </div>

                  <div class="col">
                    <div class="text-right">
                      <label class="form-label" id='approveRequestedLWD'>Approve Requested LWD </label>
                      <label class="el-switch el-switch-green">
                        <input type="checkbox" name="switch" value="yes" formControlName="approveRequestedLWD">
                        <span class="el-switch-style"></span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>




              <div class="form-group form-group-vertical col-xs-12 col-sm-6">
                <label class="form-label">Notice Pay Days</label>
                <input class="form-control" type="number" step=".01" maxlength="5" onpaste="return false;"
                  name="NoticePeriodDays" formControlName="NoticePeriodDays"
                  [ngClass]="{'is-invalid': submitted && g.NoticePeriodDays.errors }" placeholder="45"
                  autocomplete="none|false|no">
                <div *ngIf="submitted && g.NoticePeriodDays.errors" class="invalid-feedback">
                  <div *ngIf="g.NoticePeriodDays.errors.required">Notice Period is required
                  </div>
                </div>
              </div>
              <div class="form-group form-group-vertical col-xs-12 col-sm-6">
                <label class="form-label">Notice Rule</label>
                <ng-select [items]="noticePaymentRules" placeholder="Select an Option"
                  formControlName="NoticePeriodRuleId"
                  [ngClass]="{'ng-touched': submitted && g.NoticePeriodRuleId.invalid }" bindLabel="Name"
                  bindValue="PayrollRuleId">
                </ng-select>
                <div *ngIf="submitted && g.NoticePeriodRuleId.invalid" class="help-block">
                  <div *ngIf="g.NoticePeriodRuleId.errors.required">Notice Rule is required
                  </div>
                </div>
              </div>
              <div class="form-group form-group-vertical col-xs-12 col-sm-6" *ngIf="!g.EnterRecoveryManuaaly.value">
                <label class="form-label">Recovery Days </label>
                <input class="form-control" maxlength="5" onpaste="return false;" name="RecoveryDays"
                  formControlName="RecoveryDays" type="number" step=".01"
                  [ngClass]="{'is-invalid': submitted && g.RecoveryDays.errors }" placeholder="45"
                  autocomplete="none|false|no">
                <div *ngIf="submitted && g.RecoveryDays.errors" class="invalid-feedback">
                  <div *ngIf="g.RecoveryDays.errors.required">Recovery Days is required
                  </div>
                </div>
              </div>
              <div class="form-group form-group-vertical col-xs-12 col-sm-6" *ngIf="!g.EnterRecoveryManuaaly.value">
                <label class="form-label">Recovery Rule</label>
                <ng-select [items]="recoveryRules" placeholder="Select an Option" formControlName="RecoveryRuleId"
                  [ngClass]="{'ng-touched': submitted && g.RecoveryRuleId.invalid }" bindLabel="Name"
                  bindValue="PayrollRuleId">
                </ng-select>
                <div *ngIf="submitted && g.RecoveryRuleId.invalid" class="help-block">
                  <div *ngIf="g.RecoveryRuleId.errors.required">Recovery Rule is required
                  </div>
                </div>
              </div>


              <div class="form-group form-group-vertical col-12 col-xs-12 col-lg-6 col-md-4 col-sm-6">
                <label class="form-label" id='EnterRecoveryManuaaly'>Enter Recovery Amount Manually </label>
                <div class="p-t-10">
                  <label class="el-switch el-switch-green">
                    <input type="checkbox" name="switch" value="yes" formControlName="EnterRecoveryManuaaly">
                    <span class="el-switch-style"></span>
                  </label>
                </div>
              </div>

              <div class="form-group form-group-vertical col-xs-12 col-sm-6" *ngIf="g.EnterRecoveryManuaaly.value">
                <label class="form-label">Recovery Amount </label>
                <input class="form-control" type="text" maxlength="10" name="RecoveryAmount"
                  formControlName="RecoveryAmount" onkeypress="return /^[0-9]+$/i.test(event.key)" name="RecoveryAmount"
                  [ngClass]="{'is-invalid': submitted && g.RecoveryAmount.errors }" placeholder="Enter Amount"
                  autocomplete="none|false|no">
                <div *ngIf="submitted && g.RecoveryAmount.errors" class="invalid-feedback">
                  <div *ngIf="g.RecoveryAmount.errors.required">Recovery is required
                  </div>
                </div>
              </div>

              <div class="form-group form-group-vertical col-xs-12 col-md-12 col-lg-12 col-sm-12">
                <label class="form-label">Recovery Remarks <span class="required">*</span></label>
                <textarea class="form-control" rows="2" spellcheck="false" id="RecoveryRemarks"
                  formControlName="RecoveryRemarks"></textarea>
                <div *ngIf="submitted && g.RecoveryRemarks.invalid" class="help-block">
                  <div *ngIf="g.RecoveryRemarks.errors.required">Recovery Remarks is required
                  </div>
                </div>
              </div>




            </div>

            <!-- Leave Encashment -->
            <div class="row" *ngIf="index == 2">
              <!-- <div class="row">
                <div class="col-12 p-10">
                  <small class="help-text"
                    style="text-align: center;display: block;color: #f8a01c;font-size: 14px !important">
                    <i class="fa fa-info-circle"></i> <b> Warning : </b> you have entered an invalid input. Please
                    correct and try again. </small>
                </div>
              </div> -->


              <div class="col-lg-6 col-xs-12 col-sm-12" *ngIf="!g.EnterLeaveEncashManually.value">
                <label>Leave Encashment</label>
                <div class="form-group form-group-vertical col-xs-12 col-sm-12 p-l-0">
                  <table class="table table-bordered table-container">
                    <thead>
                      <tr class="document_table_tr">
                        <th scope="col" style="width: 40%"> Leave Type</th>
                        <th scope="col" style="width: 30%;text-align: center">Balance</th>
                        <th scope="col" style="width: 30%;text-align: center">Encash </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let item of lst_LeaveEncashment; let i = index">
                        <td class="table-td-center">
                          {{item.EntittlementTypeCode}}
                        </td>
                        <td class="txt-align document_table_validFrom table-td-center">
                          <input type="text" maxlength="12" onkeypress="return /^[0-9]+$/i.test(event.key)" disabled
                            value="{{item.Opening}}" class="form-control" style="text-align:right;height: 34px;">
                        </td>
                        <td class="txt-align document_table_validFrom table-td-center">
                          <input type="number" max="33333" maxlength="12"
                            onkeypress="return /^[0-9]+$/i.test(event.key)"
                            (change)="onChangeEncash($event.target.value, item)" [(ngModel)]="item.Encash"
                            [ngModelOptions]="{standalone: true}" class="form-control cc"
                            [ngClass]="{'border-color_red': (item.Encash > item.ClosingBalance) , 'border-color_normal' : (item.Encash <= item.ClosingBalance)}">
                        </td>

                      </tr>
                    </tbody>
                    <tfoot>
                      <tr>
                        <td style="padding: 10px;font-size: 14px;" colspan="12">Total <b
                            style="float: right">{{g.LeaveEncashmentDays.value}}</b></td>
                      </tr>
                    </tfoot>
                  </table>
                </div>
                <div class="form-group form-group-vertical col-xs-12 col-sm-12 p-l-0">
                  <label class="form-label">Leave Encashment Rule</label>
                  <ng-select [items]="leaveEncashmentRules" placeholder="Select an Option"
                    formControlName="LeaveEncashRuleId"
                    [ngClass]="{'ng-touched': submitted && g.LeaveEncashRuleId.invalid }" bindLabel="Name"
                    bindValue="PayrollRuleId">
                  </ng-select>
                  <div *ngIf="submitted && g.LeaveEncashRuleId.invalid" class="help-block">
                    <div *ngIf="g.LeaveEncashRuleId.errors.required">Leave Encashment Rule is required
                    </div>
                  </div>
                </div>
              </div>
              <div class=" col-lg-6 col-xs-12 col-sm-12">
                <div class=" col-xs-12 col-lg-12 col-md-6 col-sm-6 p-l-0">
                  <label class="form-label" id='EnterLeaveEncashManually'>Enter Amount Manually </label>
                  <div class="p-t-10">
                    <label class="el-switch el-switch-green">
                      <input type="checkbox" name="switch" value="yes" formControlName="EnterLeaveEncashManually">
                      <span class="el-switch-style"></span>
                    </label>
                  </div>
                </div>
                <div class="col-xs-12 col-lg-12 col-md-12 col-sm-12 p-l-0" *ngIf="g.EnterLeaveEncashManually.value">
                  <label class="form-label">Leave Encash Amount </label>
                  <input class="form-control" type="text" maxlength="10" onkeypress="return /^[0-9]+$/i.test(event.key)"
                    name="LeaveEncashmentAmount" formControlName="LeaveEncashmentAmount"
                    [ngClass]="{'is-invalid': submitted && g.LeaveEncashmentAmount.errors }" placeholder="7000"
                    autocomplete="none|false|no">
                  <div *ngIf="submitted && g.LeaveEncashmentAmount.errors" class="invalid-feedback">
                    <div *ngIf="g.LeaveEncashmentAmount.errors.required">Leave Encash Amount is required
                    </div>
                  </div>
                </div>

              </div>
            </div>

            <!-- Variable and gratuity -->

            <div class="row" *ngIf="index == 3">

              <!-- Variable Inputs -->
              <!-- <div class="col-lg-6 col-xs-12 col-sm-12">
                <label>Variable Inputs </label>
                <ngb-tabset>
                  <ngb-tab id="Allowance">
                    <ng-template ngbTabTitle><i class="fa fa-window-maximize" aria-hidden="true"></i>&nbsp;&nbsp;Allowance
                    </ng-template>
                    <ng-template ngbTabContent>
                      <table class="table table-bordered table-container">
                        <thead>
                          <tr class="document_table_tr">
                            <th scope="col">Code</th>
                            <th scope="col">Name</th>
                            <th scope="col" style="width: 20%;text-align: center">Existing Amount</th>
                            <th scope="col" style="width: 20%;text-align: center">New Amount</th>
    
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let item of LstTimeCardAllowanceProducts; let i = index"
                            [ngStyle]="{'font-weight': item.ProductTypeCode =='Earning' || item.ProductTypeCode =='Deductions' || item.ProductTypeCode =='Total' ? '600' : '400' }">
                            <td class="table-td-center" style="font-size: 14px;
                                    font-weight: 500;">
                              {{item.Code}}
                            </td>
                            <td class="table-td-center" style="font-size: 14px;
                                    font-weight: 500;">
                              {{item.Name}}
                            </td>
                            <td class="txt-align document_table_validFrom table-td-center">
                              <input type="number" max="33333" style="text-align:right" maxlength="12"
                                onkeypress="return /^[0-9]+$/i.test(event.key)" disabled [(ngModel)]="item.ExistingAmount"
                                class="form-control">
                            </td>
                            <td class="txt-align document_table_validFrom table-td-center">
                              <input type="number" max="33333" style="text-align:right" maxlength="12"
                                onkeypress="return /^-?[0-9]\d*(\.\d+)?$/i.test(event.key)" [(ngModel)]="item.NewAmount"
                                class="form-control">
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </ng-template>
                  </ngb-tab>
                  <ngb-tab id="Adjustment">
                    <ng-template ngbTabTitle><i class="fa fa-window-maximize" aria-hidden="true"></i>&nbsp;&nbsp;Adjustment
                    </ng-template>
                    <ng-template ngbTabContent>
                      <table class="table table-bordered table-container">
                        <thead>
                          <tr class="document_table_tr">
                            <th scope="col">Code</th>
                            <th scope="col">Name</th>
                            <th scope="col" style="width: 20%;text-align: center">Existing Amount</th>
                            <th scope="col" style="width: 20%;text-align: center">New Amount</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let item of LstTimeCardAdjustmentProducts; let i = index"
                            [ngStyle]="{'font-weight': item.ProductTypeCode =='Earning' || item.ProductTypeCode =='Deductions' || item.ProductTypeCode =='Total' ? '600' : '400' }">
                            <td class="table-td-center" style="font-size: 14px;
                                        font-weight: 500;">
                              {{item.Code}}
                            </td>
                            <td class="table-td-center" style="font-size: 14px;
                                        font-weight: 500;">
                              {{item.Name}}
                            </td>
                            <td class="txt-align document_table_validFrom table-td-center">
                              <input type="number" max="33333" style="text-align:right" maxlength="12"
                                onkeypress="return /^-?[0-9]++$/i.test(event.key)" disabled
                                [(ngModel)]="item.ExistingAmount" class="form-control">
                            </td>
                            <td class="txt-align document_table_validFrom table-td-center">
                              <input type="number" max="33333" style="text-align:right" maxlength="12"
                                onkeypress="return /^-?[0-9]\d*(\.\d+)?$?/i.test(event.key)" [(ngModel)]="item.NewAmount"
                                class="form-control">
                            </td>
    
                          </tr>
                        </tbody>
                      </table>
                    </ng-template>
                  </ngb-tab>
                </ngb-tabset>
           
              </div> -->

              <div class="col-xs-12 col-sm-12 p-l-10">

                <div class="row">
                  <div class="col-12 p-10">
                    <label>Gratuity Inputs</label>
                  </div>
                </div>


                <div class="form-group form-group-vertical col-xs-12 col-sm-6 p-l-0 "
                  *ngIf="!g.EnterGratuityManually.value">
                  <label class="form-label">Gratuity Period (Years) </label>
                  <input class="form-control" type="text" maxlength="2"
                    onkeypress="return /^[0-9]+$/i.test(event.key) && (this.value.length < 2 || (this.value.length == 1 && event.key <= '5'))"
                    name="GratuityPeriod" formControlName="GratuityPeriod"
                    [ngClass]="{'is-invalid': submitted && g.GratuityPeriod.errors }" placeholder="5"
                    autocomplete="none|false|no">
                  <div *ngIf="submitted && g.GratuityPeriod.errors" class="invalid-feedback">
                    <div *ngIf="g.GratuityPeriod.errors.required">Gratuity Period is required
                    </div>
                  </div>
                </div>
                <div class="form-group form-group-vertical col-xs-12 col-sm-6 p-l-0"
                  *ngIf="!g.EnterGratuityManually.value">
                  <label class="form-label">Gratuity Rule</label>
                  <ng-select [items]="gratuityRules" placeholder="Select an Option" formControlName="GratuityRuleId"
                    [ngClass]="{'ng-touched': submitted && g.GratuityRuleId.invalid }" bindLabel="Name"
                    bindValue="PayrollRuleId">
                  </ng-select>
                  <div *ngIf="submitted && g.GratuityRuleId.invalid" class="help-block">
                    <div *ngIf="g.GratuityRuleId.errors.required">Gratuity Rule is required
                    </div>
                  </div>
                </div>
                <div class="form-group form-group-vertical col-6 col-xs-12 col-lg-6 col-md-6 col-sm-6 p-l-0">
                  <label class="form-label" id='EnterGratuityManually'>Enter Gratuity Manually </label>
                  <div class="p-t-10">
                    <label class="el-switch el-switch-green">
                      <input type="checkbox" name="switch" [value]="!g.EnterGratuityManually.value"
                        formControlName="EnterGratuityManually">
                      <span class="el-switch-style"></span>
                    </label>
                  </div>
                </div>
                <div class="form-group form-group-vertical col-xs-12 col-sm-6 p-l-0"
                  *ngIf="g.EnterGratuityManually.value">
                  <label class="form-label">Gratuity Amount </label>
                  <input class="form-control" type="text" maxlength="10" onkeypress="return /^[0-9]+$/i.test(event.key)"
                    name="GratuityAmount" formControlName="GratuityAmount"
                    [ngClass]="{'is-invalid': submitted && g.GratuityAmount.errors }" placeholder="7000"
                    autocomplete="none|false|no">
                  <div *ngIf="submitted && g.GratuityAmount.errors" class="invalid-feedback">
                    <div *ngIf="g.GratuityAmount.errors.required">Gratuity Amount is required
                    </div>
                  </div>
                </div>

              </div>





            </div>

            <!-- Pay Process -->
            <div class="row" *ngIf="index == 4">

              <!-- Pay Process Type -->
              <!-- <div class="form-group form-group-vertical col-xs-12 col-sm-6">
                <label class="form-label">Pay Process Type</label>
                <ng-select [items]="lst_ResignationReason" placeholder="Select an Option"
                  formControlName="PayProcessType" [ngClass]="{'ng-touched': submitted && g.PayProcessType.invalid }"
                  bindLabel="Name" bindValue="id">
                </ng-select>
                <div *ngIf="submitted && g.PayProcessType.invalid" class="help-block">
                  <div *ngIf="g.PayProcessType.errors.required">Pay Process Type is required
                  </div>
                </div>
              </div> -->

              <div class="form-group form-group-vertical col-xs-12 col-sm-12 text-right"
                *ngIf=" (fnfPayPeriodId > payPeriodId) && salaryTimeCard !== null">
                <button class="btn btn-primary" (click)="markEmployeeForSeparation()"
                  tooltip="Salary is under process for the month of {{payPeriodName}}. Do you want to stop salary payment?">
                  Void Salary Timecard
                </button>
              </div>


              <div class="form-group form-group-vertical col-xs-12 col-sm-6">
                <label class="form-label">Letter Template</label>
                <ng-select [items]="letterTemplates" placeholder="Select an Option" formControlName="LetterTemplate"
                  [ngClass]="{'ng-touched': submitted && g.LetterTemplate.invalid }" bindLabel="name" bindValue="id">
                </ng-select>
                <div *ngIf="submitted && g.LetterTemplate.invalid" class="help-block">
                  <div *ngIf="g.LetterTemplate.errors.required">Letter Template is required
                  </div>
                </div>
              </div>

              <!-- <div class="form-group form-group-vertical col-xs-12 col-sm-6">
                <label class="form-label">Loan Recovery Amount </label>
                <input class="form-control"  type="text" maxlength="10"
                  onkeypress="return /^[0-9]+$/i.test(event.key)" name="LoanRecoveryAmount"
                  formControlName="LoanRecoveryAmount"
                  [ngClass]="{'is-invalid': submitted && g.LoanRecoveryAmount.errors }" placeholder="45"
                  autocomplete="none|false|no">
                <div *ngIf="submitted && g.LoanRecoveryAmount.errors" class="invalid-feedback">
                  <div *ngIf="g.LoanRecoveryAmount.errors.required">Loan Recovery Amount is required
                  </div>
                </div>
              </div> -->



            </div>

          </form>
        </div>

        <!-- Previous and Next Footer -->
        <div class="col-lg-12 footer" *ngIf="footer">

          <div class="pull-left">
            <button class="btn  btn-default " (click)="prev()" *ngIf="index > 0 && (isManager || isClientSPOC)">
              <div class="pos-rlt sm-btn-component"> <span> <i class="mdi mdi-skip-previous"></i> Previous </span></div>
            </button>
          </div>



          <div class="pull-right">

            <button class="btn btn-default m-r-sm" (click)="editAttendance()" *ngIf="index == 3">
              <div class="pos-rlt sm-btn-component"> <span> <i class="mdi mdi-eye-outline"></i>
                  Edit Attendance </span></div>
            </button>

            <button class="btn btn-default" (click)="next()" *ngIf="index < 4 &&  !(isManager && index == 1)">
              <div class="pos-rlt sm-btn-component"> <span> <i class="mdi mdi-skip-next"></i>
                  Next </span></div>
            </button>



            <button class="btn btn-default m-r-sm" (click)="previewFnF()" *ngIf="false">
              <div class="pos-rlt sm-btn-component"> <span> <i class="mdi mdi-eye-outline"></i>
                  Save & Preview Letter </span></div>
            </button>
            <!-- <button class="btn btn-primary m-r-sm"   (click)="submit(true , false , true)"
              *ngIf="index == 4">
              <div class="pos-rlt sm-btn-component"> <span> <i class="mdi mdi-checkbox-marked-outline"></i>
                  Save </span></div>
            </button> -->
            <!-- <button class="btn btn-default"  (click)="calculatePayroll()" *ngIf="index == 4">
              <div class="pos-rlt sm-btn-component"> <span> <i class="mdi mdi-calculator"></i>
                  Calculate Payroll </span></div>
            </button> -->

          </div>

        </div>

      </div>
    </div>
  </div>
</div>

<nz-drawer [nzVisible]="variableInput_Slider" [nzWidth]="840" nzTitle="FnF Time Card Transaction"
  (nzOnClose)="close_variableInput_Slider()">

  <ngb-tabset (tabChange)="loadData_slider($event)" [(activeId)]="_slider_activeTabName" style="width: 100%;">
    <ngb-tab id="salaryInput">
      <ng-template ngbTabTitle><i class="fa fa-credit-card" aria-hidden="true"></i>&nbsp;&nbsp;Salary Inputs
      </ng-template>
      <ng-template ngbTabContent>
        <ngb-tabset (tabChange)="beforeSalaryTabChange($event)" [(activeId)]="slider_salaryActiveTabName"
          style="width: 100%;">
          <ngb-tab id="Allowance">
            <ng-template ngbTabTitle><i class="fa fa-window-maximize" aria-hidden="true"></i>&nbsp;&nbsp;Allowance
            </ng-template>
            <ng-template ngbTabContent>
              <table class="table table-bordered table-container">
                <thead>
                  <tr class="document_table_tr">
                    <th scope="col">Product Code</th>
                    <th scope="col">Product Name</th>
                    <th scope="col" style="width: 20%;text-align: center">Existing Amount</th>
                    <th scope="col" style="width: 20%;text-align: center">New Amount</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of LstTimeCardAllowanceProducts; let i = index"
                    [ngStyle]="{'font-weight': item.ProductTypeCode =='Earning' || item.ProductTypeCode =='Deductions' || item.ProductTypeCode =='Total' ? '600' : '400' }">
                    <td class="table-td-center" style="font-size: 14px;
                                font-weight: 500;">
                      {{item.Code}}
                    </td>
                    <td class="table-td-center" style="font-size: 14px;
                                font-weight: 500;">
                      {{item.Name}}
                    </td>
                    <td class="txt-align document_table_validFrom table-td-center">
                      <input type="number" max="33333" style="text-align:right" maxlength="12"
                        onkeypress="return /^[0-9]+$/i.test(event.key)" disabled [(ngModel)]="item.ExistingAmount"
                        class="form-control">
                    </td>
                    <td class="txt-align document_table_validFrom table-td-center">
                      <input type="number" max="33333" style="text-align:right" maxlength="12"
                        onkeypress="return /^-?[0-9]\d*(\.\d+)?$/i.test(event.key)" [(ngModel)]="item.NewAmount"
                        class="form-control">
                    </td>
                  </tr>
                </tbody>
              </table>
            </ng-template>
          </ngb-tab>
          <ngb-tab id="Adjustment">
            <ng-template ngbTabTitle><i class="fa fa-window-maximize" aria-hidden="true"></i>&nbsp;&nbsp;Adjustment
            </ng-template>
            <ng-template ngbTabContent>
              <table class="table table-bordered table-container">
                <thead>
                  <tr class="document_table_tr">
                    <th scope="col">Product Code</th>
                    <th scope="col">Product Name</th>
                    <th scope="col" style="width: 20%;text-align: center">Existing Amount</th>
                    <th scope="col" style="width: 20%;text-align: center">New Amount</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of LstTimeCardAdjustmentProducts; let i = index"
                    [ngStyle]="{'font-weight': item.ProductTypeCode =='Earning' || item.ProductTypeCode =='Deductions' || item.ProductTypeCode =='Total' ? '600' : '400' }">
                    <td class="table-td-center" style="font-size: 14px;
                                    font-weight: 500;">
                      {{item.Code}}
                    </td>
                    <td class="table-td-center" style="font-size: 14px;
                                    font-weight: 500;">
                      {{item.Name}}
                    </td>
                    <td class="txt-align document_table_validFrom table-td-center">
                      <input type="number" max="33333" style="text-align:right" maxlength="12"
                        onkeypress="return /^-?[0-9]++$/i.test(event.key)" disabled [(ngModel)]="item.ExistingAmount"
                        class="form-control">
                    </td>
                    <td class="txt-align document_table_validFrom table-td-center">
                      <input type="number" max="33333" style="text-align:right" maxlength="12"
                        onkeypress="return /^-?[0-9]\d*(\.\d+)?$?/i.test(event.key)" [(ngModel)]="item.NewAmount"
                        class="form-control">
                    </td>

                  </tr>
                </tbody>
              </table>
            </ng-template>
          </ngb-tab>
        </ngb-tabset>
      </ng-template>
    </ngb-tab>
    <ngb-tab id="attendanceDetails">
      <ng-template ngbTabTitle><i class="fa fa-calendar" aria-hidden="true"></i>&nbsp;&nbsp;Attendance Details
      </ng-template>
      <ng-template ngbTabContent>
        <!-- <ng-template #customCellTemplate let-day="day" let-locale="locale">
                    <div class="cal-cell-top">
                      <span class="cal-day-badge" *ngIf="day.badgeTotal > 0"
                        >{{ day.badgeTotal }}</span
                      >
                      <span class="cal-day-number"
                        >{{ day.date | calendarDate:'monthViewDayNumber':locale }}</span
                      >
                    </div>
                    <div class="cell-totals">
                      <span
                        *ngFor="let group of day.eventGroups"
                        class="badge badge-{{ group[0] }}"
                      >
                        {{ group[1].length }}
                      </span>
                    </div>
                  </ng-template> -->


        <ng-template #customCellTemplate let-day="day" let-locale="locale">
          <div class="cal-cell-top">
            <span class="cal-day-badge" *ngIf="day.badgeTotal > 0">{{ day.badgeTotal }}</span>
            <span class="cal-day-number">{{ day.date | calendarDate:'monthViewDayNumber':locale }}</span>
          </div>
          <div class="cal-events" *ngIf="day.events.length > 0">
            <div class="cal-event" *ngFor="let event of day.events" [style.backgroundColor]="event.color"
              [mwlCalendarTooltip]="event.title | calendarEventTitle:'monthTooltip':event"
              (mwlClick)="handleEvent($event, event)">
            </div>
          </div>
          <div class="cell-totals">
            <span *ngFor="let group of day.eventGroups" class="badge badge-{{ group[0] }}">
              {{ group[1].length }}
            </span>
          </div>
          <!-- <div class="cell-totals">
                      <span
                        
                        class="badge badge">
                        P
                      </span>
                    </div> -->

        </ng-template>

        <ng-template #customCellTemplate let-day="day" let-locale="locale">
          <div class="cal-cell-top">
            <span class="cal-day-badge" *ngIf="day.badgeTotal > 0">{{ day.badgeTotal }}</span>
            <span class="cal-day-number">{{ day.date | calendarDate:'monthViewDayNumber':locale }}</span>
          </div>
          <small style="margin: 5px;">
            <span *ngFor="let event of day.events">

              <span class="badge badge-danger" style="display: inline;" *ngIf="event.color.primary === '#ad2121'"> A
              </span>
              <span class="badge badge-success" style="display: inline;" *ngIf="event.meta.IsFirstDayHalf"> P
              </span>

              <span class="badge badge-success" style="display: inline;" *ngIf="event.color.primary === '#3BBD72'">
                P </span>

            </span>
            <span *ngIf=" day.events == null">

            </span>

          </small>
        </ng-template>

        <!-- Top row -->
        <div class="row">

          <div class="col-lg-6 pull-left">

            <!-- Month Switcher -->
            <div class="pull-left">

              <a href="javascript:;" (click)="decrement()" tooltip="Previous Month" tooltip-placement="bottom"
                class="btn action-edit pull-left" style="margin-right: 5px;margin-left: 5px;">
                <i class="fa fa-angle-left" aria-hidden="true" style="font-size: 20px;
                            color: #000;
                            margin-top: -2px;
                            margin-left: 2px;"></i>
              </a>
              <a class="btn action-edit pull-left" (click)="increment()" tooltip="Next Month"
                tooltip-placement="bottom">
                <i class="fa fa-angle-right" aria-hidden="true" style="font-size: 20px;
                          color: #000;
                          margin-top: -2px;
                          margin-left: 2px;"></i>
              </a>
            </div>
            <h3>&nbsp;&nbsp; {{ viewDate | calendarDate:(view + 'ViewTitle'):'en' }}</h3>

          </div>
          <div class="col-lg-6 pull-right">
            <p class="small mb-0" style="font-size: 16px;float:right">
              <span class="text-success" style="font-size: 16px;">●</span> <b> Present &nbsp;</b>
            </p>
            <p class="small mb-0" style="font-size: 16px;float:right;margin-right: 10px;">
              <span class="text-danger" style="font-size: 16px;">●</span> <b> Absent</b>
            </p>
          </div>
        </div>

        <!-- Calendar       -->
        <div class="row">
          <div class="col-lg-12">
            <div [ngSwitch]="view">
              <mwl-calendar-month-view *ngSwitchCase="'month'" [viewDate]="viewDate" [events]="events"
                (eventClicked)="eventClicked($event)" (dayClicked)="dayClicked($event.day)"
                (beforeViewRender)="beforeMonthViewRender($event)" [cellTemplate]="customCellTemplate">
              </mwl-calendar-month-view>
            </div>
          </div>
        </div>

        <br>
        <!-- Summary Row -->
        <div class="row">


          <div class="col-md-4">
            <div class="form-group form-group-vertical col-xs-12  col-sm-12">
              <label class="form-label">No. of Days Present<span class="required"></span></label>
              <p class="date">{{noOfP}}</p>

            </div>
          </div>
          <!-- <div class="col-md-3"> -->
          <!-- <div class="form-group form-group-vertical col-xs-12  col-sm-12">
           <label class="form-label">No. of Days Absent<span class="required"></span></label>
           <p class="date">0</p>

         </div> -->
          <!-- </div> -->
          <div class="col-md-4">
            <div class="form-group form-group-vertical col-xs-12  col-sm-12">
              <label class="form-label">LOP Days<span class="required"></span></label>
              <p class="date">{{noOfA}}</p>

            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group form-group-vertical col-xs-12  col-sm-12">
              <label class="form-label">Attendance Cycle<span class="required"></span></label>
              <p class="date">{{g.AttendanceStartDate.value| date :'dd'}}th ~
                {{g.CalculatedLastWorkingDate.value | date:'dd'}}th</p>

            </div>
          </div>
          <hr>

        </div>

        <!-- <div class="col-lg-6"> -->
        <!-- <div [ngSwitch]="view">
      <mwl-calendar-month-view
      *ngSwitchCase="CalendarView.Month"
      [viewDate]="viewDate"
      [events]="events"
      >
    </mwl-calendar-month-view>
    </div> -->
        <!-- </div> -->

      </ng-template>
    </ngb-tab>
  </ngb-tabset>


  <div class="row" style="position: absolute;bottom: 10px;width: 100%;">
    <div class="col-lg-6">
      <ul class="list-inline">

      </ul>
    </div>
    <div class="col-lg-6 text-right">
      <div class="text-right">
        <ul class="list-inline">

          <li class="list-inline-item"> <button class="btn btn-default" type="button"
              (click)="close_variableInput_Slider()">
              <i class="fa fa-ban" aria-hidden="true"></i> &nbsp;
              Close</button>
          </li>
          <li class="list-inline-item"> <button class="btn  btn-primary" type="Submit" name="btnSubmit" id="btnSubmit"
              (click)="saveVariableSliderDetails()" [disabled]="!fnfEditAttendanceAccess.includes('RegionalHR')">
              <div class="pos-rlt sm-btn-component"> <span> <i class="fa fa-hdd-o" aria-hidden="true"></i> &nbsp;
                  Save
                </span></div>
            </button></li>

        </ul>
      </div>
    </div>
  </div>

</nz-drawer>

<nz-drawer [nzVisible]="visible_previewFnF" [nzWidth]="840" nzIcon="user" nzTitle="Full & Final Settlement - Preview"
  (nzOnClose)="close_previewFnF()">
  <div class="headerbar-right">
    <div class="media">
      <div class="media-body">
        <label>Employee Code</label>
        <h6>14509</h6>
      </div>
    </div>
    <div class="media">
      <div class="media-body">
        <label>Employee Name</label>
        <h6>Arul Mano Ambrose</h6>
      </div>
    </div>
    <div class="media">
      <div class="media-body">
        <label> Designation</label>
        <h6>Sofware Engineer</h6>
      </div>
    </div>
    <!-- <div class="media">
      <div class="media-body">
        <label> Location</label>
        <h6>Bangalore</h6>
      </div>
    </div> -->
    <div class="media">
      <div class="media-body">
        <label> DOJ</label>
        <h6>12 October, 2019</h6>
      </div>
    </div>
  </div>
  <br />
  <br />
  <div class="row">
    <div class="col-lg-6 col-sm-12 col-xs-12">
      <nz-descriptions [nzColumn]="2">
        <nz-descriptions-item nzTitle="Resigned On" [nzSpan]="2">
          <b>12 October, 2020</b>
        </nz-descriptions-item>
        <nz-descriptions-item nzTitle="Settled On" [nzSpan]="2">
          <b>29 Novemebt, 2020</b></nz-descriptions-item>
        <nz-descriptions-item nzTitle="Notice Period" [nzSpan]="2">
          <b>45</b></nz-descriptions-item>
        <nz-descriptions-item nzTitle="Recover Day(s)" [nzSpan]="2">
          <b>25</b></nz-descriptions-item>
      </nz-descriptions>
    </div>
    <div class="col-lg-6 col-sm-12 col-xs-12">
      <nz-descriptions [nzColumn]="2">
        <nz-descriptions-item nzTitle="Last Working Day" [nzSpan]="2">
          <b>28 November, 2020</b></nz-descriptions-item>
        <nz-descriptions-item nzTitle="Day(s) Worked" [nzSpan]="2">
          <b>365</b></nz-descriptions-item>
        <nz-descriptions-item nzTitle="Leave Encash" [nzSpan]="2">
          <b>230</b></nz-descriptions-item>
        <nz-descriptions-item nzTitle="Payable Amount" [nzSpan]="2">
          <b>10,000</b></nz-descriptions-item>
      </nz-descriptions>
    </div>
  </div>
  <br />

  <div class="card card-dashboard-pageviews">
    <div class="card-header p-10">
      <h6 class="card-title">Final Settlement Breakups</h6>
      <p class="card-text">This report is based on last working day</p>
    </div>
    <div class="card-body">
      <div class="integrum-list-item">
        <div>
          <h6>Basic</h6>
          <span>Earning</span>
        </div>
        <div>
          <h6 class="tx-primary">7,755</h6>
          <span>31.74% (-100.00%)</span>
        </div>
      </div>
      <div class="integrum-list-item">
        <div>
          <h6>HRA</h6>
          <span>Earning</span>
        </div>
        <div>
          <h6 class="tx-primary">5,215</h6>
          <span>28.53% (-100.00%)</span>
        </div>
      </div>
      <div class="integrum-list-item">
        <div>
          <h6> Special Allowance</h6>
          <span>Earning</span>
        </div>
        <div>
          <h6 class="tx-primary">4,848</h6>
          <span>25.35% (-100.00%)</span>
        </div>
      </div>
      <div class="integrum-list-item">
        <div>
          <h6>PF</h6>
          <span>Deduction</span>
        </div>
        <div>
          <h6 class="tx-danger">3,275</h6>
          <span>23.17% (-100.00%)</span>
        </div>
      </div>
      <div class="integrum-list-item">
        <div>
          <h6>PT</h6>
          <span>Deduction</span>
        </div>
        <div>
          <h6 class="tx-danger">3,003</h6>
          <span>22.21% (-100.00%)</span>
        </div>
      </div>
    </div>
  </div>



  <nz-descriptions [nzColumn]="2" style="padding-top: 45px;">
    <nz-descriptions-item nzTitle="Resignation Remarks" [nzSpan]="1"><b>
        Your web analytics dashboard template. </b>
    </nz-descriptions-item>
    <nz-descriptions-item nzTitle="Recovery Remarks" [nzSpan]="1"><b>
        Settlement Completed For Respective Employee </b>
    </nz-descriptions-item>
  </nz-descriptions>
</nz-drawer>